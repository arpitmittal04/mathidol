{"version":3,"sources":["jquery.nicescroll.js"],"names":["factory","define","amd","jQuery","getScriptPath","scripts","document","getElementsByTagName","path","length","src","split","slice","join","mplex","el","lst","fn","a","domfocus","mousefocus","tabindexcounter","ascrailcounter","globalmaxzindex","$","vendors","setAnimationFrame","window","requestAnimationFrame","clearAnimationFrame","cancelAnimationFrame","vx","v","ClsMutationObserver","MutationObserver","WebKitMutationObserver","_globaloptions","zindex","cursoropacitymin","cursoropacitymax","cursorcolor","cursorwidth","cursorborder","cursorborderradius","scrollspeed","mousescrollstep","touchbehavior","hwacceleration","usetransition","boxzoom","dblclickzoom","gesturezoom","grabcursorenabled","autohidemode","background","iframeautoresize","cursorminheight","preservenativescrolling","railoffset","railhoffset","bouncescroll","spacebarenabled","railpadding","top","right","left","bottom","disableoutline","horizrailenabled","railalign","railvalign","enabletranslate3d","enablemousewheel","enablekeyboard","smoothscroll","sensitiverail","enablemouselockapi","cursorfixedheight","directionlockdeadzone","hidecursordelay","nativeparentscrolling","enablescrollonselection","overflowx","overflowy","cursordragspeed","rtlmode","cursordragontouch","oneaxismousemode","scriptpath","preventmultitouchscrolling","browserdetected","getBrowserDetection","detectCursorGrab","d","ischrome","ischrome22","isie","p","_style","cursor","_el","createElement","style","_agent","navigator","userAgent","_platform","platform","haspointerlock","isopera","isopera12","isoperamini","Object","prototype","toString","call","operamini","isieold","isie7","documentMode","isie8","isie9","isie10","isie11","isie9mobile","test","isie7mobile","ismozilla","iswebkit","ischrome26","cantouch","documentElement","hasmstouch","MSPointerEvent","hasw3ctouch","PointerEvent","ismac","isios","isios4","isios7","isandroid","haseventlistener","trstyle","hastransform","hastranslate3d","transitionstyle","hastransition","transitionend","check","prefixstyle","prefix","evs","cursorgrabvalue","hasmousecapture","hasMutationObserver","NiceScrollClass","myopt","me","getMatrixValues","tr","self","doc","css","cap","substr","replace","getZIndex","dom","win","zIndex","nodeType","zi","isNaN","parseInt","parent","getWidthToPixel","prop","chkheight","wd","px","parseFloat","_convertBorderWidth","brd","outerHeight","innerHeight","outerWidth","innerWidth","_modernWheelEvent","name","bubble","_bind","e","event","original","target","srcElement","type","deltaMode","deltaX","deltaZ","preventDefault","returnValue","stopImmediatePropagation","cancelBubble","deltaY","wheelDelta","wheelDeltaX","detail","execScrollWheel","hr","chkscroll","py","Math","floor","opt","hrend","getScrollLeft","page","maxw","scrollmom","stop","lastdeltax","debounced","dt","rail","drag","doScrollLeftBy","ispage","zoomactive","getScrollTop","maxh","lastdeltay","doScrollBy","this","version","extend","snapbackspeed","iddoc","id","nodeName","haswrapper","docscroll","body","viewport","isfixed","iframe","isiframe","istextarea","forcescreen","canshowonmouseevent","onmousedown","onmouseup","onmousemove","onmousewheel","onkeypress","ongesturezoom","onclick","onscrollstart","onscrollend","onscrollcancel","onzoomin","onzoomout","view","scroll","x","y","scrollratio","cursorheight","scrollvaluemax","isrtlmode","scrollrunning","observer","observerremover","observerbody","getElementById","cursorfreezed","selectiondrag","zoom","hasfocus","hasmousefocus","visibility","railslocked","locked","hidden","cursoractive","wheelprevented","nativescrollingarea","checkarea","events","saved","delaylist","synclist","detected","canhwscroll","ishwscroll","hasreversehr","istouchcapable","tm","dd","setTimeout","_onsync","synched","requestSync","nn","unsynched","pars","n","push","scrollTop","val","setScrollTop","scrollLeft","setScrollLeft","BezierClass","st","ed","spd","p1","p2","p3","p4","ts","Date","getTime","df","B2","t","B3","B4","getNow","nw","pc","bz","round","update","translate","tx","ty","last","mtx","timerscroll","bh","notifyScrollEvent","createEvent","initUIEvent","niceevent","dispatchEvent","cxscrollleft","silent","abs","getTarget","hasParent","parentNode","thin","medium","thick","getDocumentScrollOffset","pageYOffset","pageXOffset","getOffset","ofs","offset","scrl","ww","vp","updateScrollBar","len","height","railh","width","wpos","pos","off","align","h","doRailClick","dbl","pg","cur","cancelEvent","doScrollLeft","doScrollTop","pageX","pageY","w","hasanimationframe","hascancelanimationframe","clearInterval","init","-ms-touch-action","cont","overflow-y","-webkit-overflow-scrolling","position","float","background-color","border","background-clip","-webkit-border-radius","-moz-border-radius","border-radius","hborder","addClass","attr","kp","append","max","scrollable","bind","doZoom","z-index","backgroundImage","backgroundPosition","scale","doZoomIn","doZoomOut","overflow-x","overflow","wborder","cursorh","bd","margin-right","rlpos","getViewport","-webkit-tap-highlight-color","-webkit-touch-callout","outline","autohidedom","opacity","add","hide","ScrollMomentumClass2D","onmangotouch","lastscrolly","lastscrollx","dfy","mangotouch","sy","dfx","sx","sqrt","pow","dry","drx","lazy","clearTimeout","reset","ly","lx","ds","doMomentum","lef","ontouchstart","pointerType","hasmoving","tg","nc","getNiceScroll","cancelScroll","skp","stopPropagation","clientX","changedTouches","clientY","le","screenX","screenY","sl","pt","dl","scrollWidth","scrollHeight","ck","wp","lastmouseup","ip","setCapture","_onclick","click","preventclick","ontouchend","hideCursor","releaseCapture","moveneedoffset","ontouchmove","byiframe","targetTouches","onpreventclick","ev","ofy","ofx","fy","my","fx","mx","ny","nx","grabbed","ay","ax","dz","prepareTransition","showCursor","selection","clear","hronly","csspointerevents","pointer-events","triggerScrollEnd","which","mw","scrollvaluemaxw","checkSelectionScroll","rt","hasTextSelected","getSelection","rangeCount","onselectionstart","onselectionend","onselectiondrag","touch-action","jqbind","is","active","onmousewheelhr","tabindex","noticeCursor","tp","getAttribute","key","keyCode","ctrl","ctrlKey","shift","shiftKey","ret","doScrollPos","doScrollTo","lazyResize","tmp","onAttributeChange","mutations","forEach","mut","hasClass","show","observe","childList","subtree","characterData","attributes","attributeFilter","mo","removedNodes","remove","attachEvent","resizeZoom","oniframeload","iframexd","contentDocument","contentWindow","domain","console","log","html","contents","find","getContentSize","hh","-webkit-transform","onscroll","readyState","cursortimeout","showonmouseevent","animate","onResize","hideRail","hideRailHr","showRail","showRailHr","premaxh","premaxw","preview","clientWidth","clientHeight","lastposition","min","resize","f","q","addEventListener","wname","tt","touches","b","preventManipulation","_unbind","bub","removeEventListener","cancel","detachEvent","unbindAll","r","unbind","toggle","disconnect","data","nicescroll","each","i","scrollstart","scrollend","scrollcancel","zoomin","zoomout","isScrollable","ov","info","current","end","chk","scrollmon","getTransitionSpeed","dif","sp","ex","istime","trans","lasttransitionstyle","newscrolly","newscrollx","newscrollspeed","timer","lft","dst","ms","request","speed","scrollendtrapped","onScrollTransitionEnd","setInterval","scrolling","sync","done","sc","bzscroll","dr","scx","pa","pe","checkContentSize","stp","relative","haf","zoomrestore","pp","padding","margin","bkg","lastx","lasty","speedx","speedy","lasttime","steptime","snapx","snapy","demulx","demuly","chkx","chky","time","now","dy","dx","newy","newx","doSnapy","snap","gp","l","pageh","pagew","xm","demulxy","scy","_scrollTop","cssHooks","get","elem","computed","extra","nice","set","value","_scrollLeft","NiceScrollArray","doms","eq","idx","args","arguments","apply","index","expr","niceScroll","wrapper","docundef","NiceScroll","getjQuery","options"],"mappings":"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","file":"jquery.nicescroll.min.js","sourcesContent":["/* jquery.nicescroll\n-- version 3.6.0\n-- copyright 2014-11-21 InuYaksa*2014\n-- licensed under the MIT\n--\n-- http://nicescroll.areaaperta.com/\n-- https://github.com/inuyaksa/jquery.nicescroll\n--\n*/\n\n(function(factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as anonymous module.\n    define(['jquery'], factory);\n  } else {\n    // Browser globals.\n    factory(jQuery);\n  }\n}(function(jQuery) {\n  \"use strict\";\n\n  // globals\n  var domfocus = false;\n  var mousefocus = false;\n  var tabindexcounter = 0;\n  var ascrailcounter = 2000;\n  var globalmaxzindex = 0;\n\n  var $ = jQuery; // sandbox\n\n  // http://stackoverflow.com/questions/2161159/get-script-path\n  function getScriptPath() {\n    var scripts = document.getElementsByTagName('script');\n    var path = scripts[scripts.length - 1].src.split('?')[0];\n    return (path.split('/').length > 0) ? path.split('/').slice(0, -1).join('/') + '/' : '';\n  }\n\n  var vendors = ['webkit','ms','moz','o'];\n\n  var setAnimationFrame = window.requestAnimationFrame || false;\n  var clearAnimationFrame = window.cancelAnimationFrame || false;\n\n  if (!setAnimationFrame) {  // legacy detection\n    for (var vx in vendors) {\n      var v = vendors[vx];\n      if (!setAnimationFrame) setAnimationFrame = window[v + 'RequestAnimationFrame'];\n      if (!clearAnimationFrame) clearAnimationFrame = window[v + 'CancelAnimationFrame'] || window[v + 'CancelRequestAnimationFrame'];\n    }\n  }\n\n  var ClsMutationObserver = window.MutationObserver || window.WebKitMutationObserver || false;\n\n  var _globaloptions = {\n    zindex: \"auto\",\n    cursoropacitymin: 0,\n    cursoropacitymax: 1,\n    cursorcolor: \"#424242\",\n    cursorwidth: \"5px\",\n    cursorborder: \"1px solid #fff\",\n    cursorborderradius: \"5px\",\n    scrollspeed: 60,\n    mousescrollstep: 8 * 3,\n    touchbehavior: false,\n    hwacceleration: true,\n    usetransition: true,\n    boxzoom: false,\n    dblclickzoom: true,\n    gesturezoom: true,\n    grabcursorenabled: true,\n    autohidemode: true,\n    background: \"\",\n    iframeautoresize: true,\n    cursorminheight: 32,\n    preservenativescrolling: true,\n    railoffset: false,\n    railhoffset: false,\n    bouncescroll: true,\n    spacebarenabled: true,\n    railpadding: {\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0\n    },\n    disableoutline: true,\n    horizrailenabled: true,\n    railalign: \"right\",\n    railvalign: \"bottom\",\n    enabletranslate3d: true,\n    enablemousewheel: true,\n    enablekeyboard: true,\n    smoothscroll: true,\n    sensitiverail: true,\n    enablemouselockapi: true,\n    //      cursormaxheight:false,\n    cursorfixedheight: false,\n    directionlockdeadzone: 6,\n    hidecursordelay: 400,\n    nativeparentscrolling: true,\n    enablescrollonselection: true,\n    overflowx: true,\n    overflowy: true,\n    cursordragspeed: 0.3,\n    rtlmode: \"auto\",\n    cursordragontouch: false,\n    oneaxismousemode: \"auto\",\n    scriptpath: getScriptPath(),\n    preventmultitouchscrolling: true\n  };\n\n  var browserdetected = false;\n\n  var getBrowserDetection = function() {\n\n    if (browserdetected) return browserdetected;\n\n    var _el = document.createElement('DIV'),\n        _style = _el.style,\n        _agent = navigator.userAgent,\n        _platform = navigator.platform,\n        d = {};\n\n    d.haspointerlock = \"pointerLockElement\" in document || \"webkitPointerLockElement\" in document || \"mozPointerLockElement\" in document;\n\n    d.isopera = (\"opera\" in window); // 12-\n    d.isopera12 = (d.isopera && (\"getUserMedia\" in navigator));\n    d.isoperamini = (Object.prototype.toString.call(window.operamini) === \"[object OperaMini]\");\n\n    d.isie = ((\"all\" in document) && (\"attachEvent\" in _el) && !d.isopera); //IE10-\n    d.isieold = (d.isie && !(\"msInterpolationMode\" in _style)); // IE6 and older\n    d.isie7 = d.isie && !d.isieold && (!(\"documentMode\" in document) || (document.documentMode == 7));\n    d.isie8 = d.isie && (\"documentMode\" in document) && (document.documentMode == 8);\n    d.isie9 = d.isie && (\"performance\" in window) && (document.documentMode >= 9);\n    d.isie10 = d.isie && (\"performance\" in window) && (document.documentMode == 10);\n    d.isie11 = (\"msRequestFullscreen\" in _el) && (document.documentMode >= 11); // IE11+\n\n    d.isie9mobile = /iemobile.9/i.test(_agent); //wp 7.1 mango\n    if (d.isie9mobile) d.isie9 = false;\n    d.isie7mobile = (!d.isie9mobile && d.isie7) && /iemobile/i.test(_agent); //wp 7.0\n\n    d.ismozilla = (\"MozAppearance\" in _style);\n\n    d.iswebkit = (\"WebkitAppearance\" in _style);\n\n    d.ischrome = (\"chrome\" in window);\n    d.ischrome22 = (d.ischrome && d.haspointerlock);\n    d.ischrome26 = (d.ischrome && (\"transition\" in _style)); // issue with transform detection (maintain prefix)\n\n    d.cantouch = (\"ontouchstart\" in document.documentElement) || (\"ontouchstart\" in window); // detection for Chrome Touch Emulation\n    d.hasmstouch = (window.MSPointerEvent || false); // IE10 pointer events\n    d.hasw3ctouch = (window.PointerEvent || false); //IE11 pointer events, following W3C Pointer Events spec\n\n    d.ismac = /^mac$/i.test(_platform);\n\n    d.isios = (d.cantouch && /iphone|ipad|ipod/i.test(_platform));\n    d.isios4 = ((d.isios) && !(\"seal\" in Object));\n    d.isios7 = ((d.isios)&&(\"webkitHidden\" in document));  //iOS 7+\n\n    d.isandroid = (/android/i.test(_agent));\n\n    d.haseventlistener = (\"addEventListener\" in _el);\n    \n    d.trstyle = false;\n    d.hastransform = false;\n    d.hastranslate3d = false;\n    d.transitionstyle = false;\n    d.hastransition = false;\n    d.transitionend = false;\n\n    var a;\n    var check = ['transform', 'msTransform', 'webkitTransform', 'MozTransform', 'OTransform'];    \n    for (a = 0; a < check.length; a++) {\n      if (typeof _style[check[a]] != \"undefined\") {\n        d.trstyle = check[a];\n        break;\n      }\n    }\n    d.hastransform = (!!d.trstyle);\n    if (d.hastransform) {\n      _style[d.trstyle] = \"translate3d(1px,2px,3px)\";\n      d.hastranslate3d = /translate3d/.test(_style[d.trstyle]);\n    }\n\n    d.transitionstyle = false;\n    d.prefixstyle = '';\n    d.transitionend = false;\n    check = ['transition', 'webkitTransition', 'msTransition', 'MozTransition', 'OTransition', 'OTransition', 'KhtmlTransition'];\n    var prefix = ['', '-webkit-', '-ms-', '-moz-', '-o-', '-o', '-khtml-'];\n    var evs = ['transitionend', 'webkitTransitionEnd', 'msTransitionEnd',  'transitionend', 'otransitionend', 'oTransitionEnd', 'KhtmlTransitionEnd'];\n    for (a = 0; a < check.length; a++) {\n      if (check[a] in _style) {\n        d.transitionstyle = check[a];\n        d.prefixstyle = prefix[a];\n        d.transitionend = evs[a];\n        break;\n      }\n    }\n    if (d.ischrome26) {  // always use prefix\n      d.prefixstyle = prefix[1];\n    }\n\n    d.hastransition = (d.transitionstyle);\n\n    function detectCursorGrab() {\n      var lst = ['-webkit-grab', '-moz-grab', 'grab'];\n      if ((d.ischrome && !d.ischrome22) || d.isie) lst = []; // force setting for IE returns false positive and chrome cursor bug\n      for (var a = 0; a < lst.length; a++) {\n        var p = lst[a];\n        _style.cursor = p;\n        if (_style.cursor == p) return p;\n      }\n      return 'url(//mail.google.com/mail/images/2/openhand.cur),n-resize'; // thank you google for custom cursor!\n    }\n    d.cursorgrabvalue = detectCursorGrab();\n\n    d.hasmousecapture = (\"setCapture\" in _el);\n\n    d.hasMutationObserver = (ClsMutationObserver !== false);\n\n    _el = null; //memory released\n\n    browserdetected = d;\n\n    return d;\n  };\n\n  var NiceScrollClass = function(myopt, me) {\n\n    var self = this;\n\n    this.version = '3.6.0';\n    this.name = 'nicescroll';\n\n    this.me = me;\n\n    this.opt = {\n      doc: $(\"body\"),\n      win: false\n    };\n\n    $.extend(this.opt, _globaloptions);  // clone opts\n\n    // Options for internal use\n    this.opt.snapbackspeed = 80;\n\n    if (myopt || false) {\n      for (var a in self.opt) {\n        if (typeof myopt[a] != \"undefined\") self.opt[a] = myopt[a];\n      }\n    }\n\n    this.doc = self.opt.doc;\n    this.iddoc = (this.doc && this.doc[0]) ? this.doc[0].id || '' : '';\n    this.ispage = /^BODY|HTML/.test((self.opt.win) ? self.opt.win[0].nodeName : this.doc[0].nodeName);\n    this.haswrapper = (self.opt.win !== false);\n    this.win = self.opt.win || (this.ispage ? $(window) : this.doc);\n    this.docscroll = (this.ispage && !this.haswrapper) ? $(window) : this.win;\n    this.body = $(\"body\");\n    this.viewport = false;\n\n    this.isfixed = false;\n\n    this.iframe = false;\n    this.isiframe = ((this.doc[0].nodeName == 'IFRAME') && (this.win[0].nodeName == 'IFRAME'));\n\n    this.istextarea = (this.win[0].nodeName == 'TEXTAREA');\n\n    this.forcescreen = false; //force to use screen position on events\n\n    this.canshowonmouseevent = (self.opt.autohidemode != \"scroll\");\n\n    // Events jump table    \n    this.onmousedown = false;\n    this.onmouseup = false;\n    this.onmousemove = false;\n    this.onmousewheel = false;\n    this.onkeypress = false;\n    this.ongesturezoom = false;\n    this.onclick = false;\n\n    // Nicescroll custom events\n    this.onscrollstart = false;\n    this.onscrollend = false;\n    this.onscrollcancel = false;\n\n    this.onzoomin = false;\n    this.onzoomout = false;\n\n    // Let's start!  \n    this.view = false;\n    this.page = false;\n\n    this.scroll = {\n      x: 0,\n      y: 0\n    };\n    this.scrollratio = {\n      x: 0,\n      y: 0\n    };\n    this.cursorheight = 20;\n    this.scrollvaluemax = 0;\n\n    this.isrtlmode = (this.opt.rtlmode == \"auto\") ? ((this.win[0] == window ? this.body : this.win).css(\"direction\") == \"rtl\") : (this.opt.rtlmode === true);\n    //    this.checkrtlmode = false;\n    \n    this.scrollrunning = false;\n\n    this.scrollmom = false;\n\n    this.observer        = false;  // observer div changes\n    this.observerremover = false;  // observer on parent for remove detection\n    this.observerbody    = false;  // observer on body for position change\n\n    do {\n      this.id = \"ascrail\" + (ascrailcounter++);\n    } while (document.getElementById(this.id));\n\n    this.rail = false;\n    this.cursor = false;\n    this.cursorfreezed = false;\n    this.selectiondrag = false;\n\n    this.zoom = false;\n    this.zoomactive = false;\n\n    this.hasfocus = false;\n    this.hasmousefocus = false;\n\n    this.visibility = true;\n    this.railslocked = false;  // locked by resize\n    this.locked = false;  // prevent lost of locked status sets by user\n    this.hidden = false; // rails always hidden\n    this.cursoractive = true; // user can interact with cursors\n\n    this.wheelprevented = false; //prevent mousewheel event\n\n    this.overflowx = self.opt.overflowx;\n    this.overflowy = self.opt.overflowy;\n\n    this.nativescrollingarea = false;\n    this.checkarea = 0;\n\n    this.events = []; // event list for unbind\n\n    this.saved = {};  // style saved\n\n    this.delaylist = {};\n    this.synclist = {};\n\n    this.lastdeltax = 0;\n    this.lastdeltay = 0;\n\n    this.detected = getBrowserDetection();\n\n    var cap = $.extend({}, this.detected);\n\n    this.canhwscroll = (cap.hastransform && self.opt.hwacceleration);\n    this.ishwscroll = (this.canhwscroll && self.haswrapper);\n\n    this.hasreversehr = (this.isrtlmode&&!cap.iswebkit);  //RTL mode with reverse horizontal axis\n    \n    this.istouchcapable = false; // desktop devices with touch screen support\n\n    //## Check WebKit-based desktop with touch support\n    //## + Firefox 18 nightly build (desktop) false positive (or desktop with touch support)\n    if (cap.cantouch && !cap.isios && !cap.isandroid && (cap.iswebkit || cap.ismozilla)) {\n      this.istouchcapable = true;\n      cap.cantouch = false; // parse normal desktop events\n    }\n\n    //## disable MouseLock API on user request\n    if (!self.opt.enablemouselockapi) {\n      cap.hasmousecapture = false;\n      cap.haspointerlock = false;\n    }\n\n/* deprecated\n    this.delayed = function(name, fn, tm, lazy) {\n    };\n*/    \n\n    this.debounced = function(name, fn, tm) {\n      var dd = self.delaylist[name];\n      self.delaylist[name] = fn;\n      if (!dd) {\n        setTimeout(function() {\n          var fn = self.delaylist[name];\n          self.delaylist[name] = false;\n          fn.call(self);\n        }, tm);\n      }\n    };\n\n    var _onsync = false;\n\n    this.synched = function(name, fn) {\n\n      function requestSync() {\n        if (_onsync) return;\n        setAnimationFrame(function() {\n          _onsync = false;\n          for (var nn in self.synclist) {\n            var fn = self.synclist[nn];\n            if (fn) fn.call(self);\n            self.synclist[nn] = false;\n          }\n        });\n        _onsync = true;\n      }\n\n      self.synclist[name] = fn;\n      requestSync();\n      return name;\n    };\n\n    this.unsynched = function(name) {\n      if (self.synclist[name]) self.synclist[name] = false;\n    };\n\n    this.css = function(el, pars) { // save & set\n      for (var n in pars) {\n        self.saved.css.push([el, n, el.css(n)]);\n        el.css(n, pars[n]);\n      }\n    };\n\n    this.scrollTop = function(val) {\n      return (typeof val == \"undefined\") ? self.getScrollTop() : self.setScrollTop(val);\n    };\n\n    this.scrollLeft = function(val) {\n      return (typeof val == \"undefined\") ? self.getScrollLeft() : self.setScrollLeft(val);\n    };\n\n    // derived by by Dan Pupius www.pupius.net\n    var BezierClass = function(st, ed, spd, p1, p2, p3, p4) {\n    \n      this.st = st;\n      this.ed = ed;\n      this.spd = spd;\n\n      this.p1 = p1 || 0;\n      this.p2 = p2 || 1;\n      this.p3 = p3 || 0;\n      this.p4 = p4 || 1;\n\n      this.ts = (new Date()).getTime();\n      this.df = this.ed - this.st;\n    };\n    BezierClass.prototype = {\n      B2: function(t) {\n        return 3 * t * t * (1 - t);\n      },\n      B3: function(t) {\n        return 3 * t * (1 - t) * (1 - t);\n      },\n      B4: function(t) {\n        return (1 - t) * (1 - t) * (1 - t);\n      },\n      getNow: function() {\n        var nw = (new Date()).getTime();\n        var pc = 1 - ((nw - this.ts) / this.spd);\n        var bz = this.B2(pc) + this.B3(pc) + this.B4(pc);\n        return (pc < 0) ? this.ed : this.st + Math.round(this.df * bz);\n      },\n      update: function(ed, spd) {\n        this.st = this.getNow();\n        this.ed = ed;\n        this.spd = spd;\n        this.ts = (new Date()).getTime();\n        this.df = this.ed - this.st;\n        return this;\n      }\n    };\n\n    //derived from http://stackoverflow.com/questions/11236090/\n    function getMatrixValues() {\n      var tr = self.doc.css(cap.trstyle);\n      if (tr && (tr.substr(0, 6) == \"matrix\")) {\n        return tr.replace(/^.*\\((.*)\\)$/g, \"$1\").replace(/px/g, '').split(/, +/);\n      }\n      return false;\n    }\n\n    if (this.ishwscroll) {\n      // hw accelerated scroll\n      this.doc.translate = {\n        x: 0,\n        y: 0,\n        tx: \"0px\",\n        ty: \"0px\"\n      };\n\n      //this one can help to enable hw accel on ios6 http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/\n      if (cap.hastranslate3d && cap.isios) this.doc.css(\"-webkit-backface-visibility\", \"hidden\"); // prevent flickering http://stackoverflow.com/questions/3461441/      \n\n      this.getScrollTop = function(last) {\n        if (!last) {\n          var mtx = getMatrixValues();\n          if (mtx) return (mtx.length == 16) ? -mtx[13] : -mtx[5]; //matrix3d 16 on IE10\n          if (self.timerscroll && self.timerscroll.bz) return self.timerscroll.bz.getNow();\n        }\n        return self.doc.translate.y;\n      };\n\n      this.getScrollLeft = function(last) {\n        if (!last) {\n          var mtx = getMatrixValues();\n          if (mtx) return (mtx.length == 16) ? -mtx[12] : -mtx[4]; //matrix3d 16 on IE10\n          if (self.timerscroll && self.timerscroll.bh) return self.timerscroll.bh.getNow();\n        }\n        return self.doc.translate.x;\n      };\n\n      this.notifyScrollEvent = function(el) {\n        var e = document.createEvent(\"UIEvents\");\n        e.initUIEvent(\"scroll\", false, true, window, 1);\n        e.niceevent = true;\n        el.dispatchEvent(e);\n      };\n\n      var cxscrollleft = (this.isrtlmode) ? 1 : -1;\n\n      if (cap.hastranslate3d && self.opt.enabletranslate3d) {\n        this.setScrollTop = function(val, silent) {\n          self.doc.translate.y = val;\n          self.doc.translate.ty = (val * -1) + \"px\";\n          self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n        this.setScrollLeft = function(val, silent) {\n          self.doc.translate.x = val;\n          self.doc.translate.tx = (val * cxscrollleft) + \"px\";\n          self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n      } else {\n        this.setScrollTop = function(val, silent) {\n          self.doc.translate.y = val;\n          self.doc.translate.ty = (val * -1) + \"px\";\n          self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n        this.setScrollLeft = function(val, silent) {\n          self.doc.translate.x = val;\n          self.doc.translate.tx = (val * cxscrollleft) + \"px\";\n          self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n      }\n    } else {\n      // native scroll\n      this.getScrollTop = function() {\n        return self.docscroll.scrollTop();\n      };\n      this.setScrollTop = function(val) {\n        return self.docscroll.scrollTop(val);\n      };\n      this.getScrollLeft = function() {\n        if (self.detected.ismozilla && self.isrtlmode)\n          return Math.abs(self.docscroll.scrollLeft());\n        return self.docscroll.scrollLeft();\n      };\n      this.setScrollLeft = function(val) {\n        return self.docscroll.scrollLeft((self.detected.ismozilla && self.isrtlmode) ? -val : val);\n      };\n    }\n\n    this.getTarget = function(e) {\n      if (!e) return false;\n      if (e.target) return e.target;\n      if (e.srcElement) return e.srcElement;\n      return false;\n    };\n\n    this.hasParent = function(e, id) {\n      if (!e) return false;\n      var el = e.target || e.srcElement || e || false;\n      while (el && el.id != id) {\n        el = el.parentNode || false;\n      }\n      return (el !== false);\n    };\n\n    function getZIndex() {\n      var dom = self.win;\n      if (\"zIndex\" in dom) return dom.zIndex(); // use jQuery UI method when available\n      while (dom.length > 0) {\n        if (dom[0].nodeType == 9) return false;\n        var zi = dom.css('zIndex');\n        if (!isNaN(zi) && zi != 0) return parseInt(zi);\n        dom = dom.parent();\n      }\n      return false;\n    }\n\n    //inspired by http://forum.jquery.com/topic/width-includes-border-width-when-set-to-thin-medium-thick-in-ie\n    var _convertBorderWidth = {\n      \"thin\": 1,\n      \"medium\": 3,\n      \"thick\": 5\n    };\n\n    function getWidthToPixel(dom, prop, chkheight) {\n      var wd = dom.css(prop);\n      var px = parseFloat(wd);\n      if (isNaN(px)) {\n        px = _convertBorderWidth[wd] || 0;\n        var brd = (px == 3) ? ((chkheight) ? (self.win.outerHeight() - self.win.innerHeight()) : (self.win.outerWidth() - self.win.innerWidth())) : 1; //DON'T TRUST CSS\n        if (self.isie8 && px) px += 1;\n        return (brd) ? px : 0;\n      }\n      return px;\n    }\n\n    this.getDocumentScrollOffset = function() {\n      return {top:window.pageYOffset||document.documentElement.scrollTop,\n              left:window.pageXOffset||document.documentElement.scrollLeft};\n    }\n    \n    this.getOffset = function() {\n      if (self.isfixed) {\n        var ofs = self.win.offset();  // fix Chrome auto issue (when right/bottom props only)\n        var scrl = self.getDocumentScrollOffset();\n        ofs.top-=scrl.top;\n        ofs.left-=scrl.left;\n        return ofs;  \n      }\n      var ww = self.win.offset();\n      if (!self.viewport) return ww;      \n      var vp = self.viewport.offset();\n      return {\n        top: ww.top - vp.top,// + self.viewport.scrollTop(),\n        left: ww.left - vp.left // + self.viewport.scrollLeft()\n      };\n    };\n\n    this.updateScrollBar = function(len) {\n      if (self.ishwscroll) {\n        self.rail.css({  //**\n          height: self.win.innerHeight() - (self.opt.railpadding.top + self.opt.railpadding.bottom)\n        });\n        if (self.railh) self.railh.css({  //**\n          width: self.win.innerWidth() - (self.opt.railpadding.left + self.opt.railpadding.right)\n        });\n        \n      } else {\n        var wpos = self.getOffset();\n        var pos = {\n          top: wpos.top,\n          left: wpos.left  - (self.opt.railpadding.left + self.opt.railpadding.right)\n        };\n        pos.top += getWidthToPixel(self.win, 'border-top-width', true);\n        pos.left += (self.rail.align) ? self.win.outerWidth() - getWidthToPixel(self.win, 'border-right-width') - self.rail.width : getWidthToPixel(self.win, 'border-left-width');\n\n        var off = self.opt.railoffset;\n        if (off) {\n          if (off.top) pos.top += off.top;\n          if (self.rail.align && off.left) pos.left += off.left;\n        }\n        \n        if (!self.railslocked) self.rail.css({\n          top: pos.top,\n          left: pos.left,\n          height: ((len) ? len.h : self.win.innerHeight()) - (self.opt.railpadding.top + self.opt.railpadding.bottom)\n        });\n\n        if (self.zoom) {\n          self.zoom.css({\n            top: pos.top + 1,\n            left: (self.rail.align == 1) ? pos.left - 20 : pos.left + self.rail.width + 4\n          });\n        }\n\n        if (self.railh && !self.railslocked) {\n          var pos = {\n            top: wpos.top,\n            left: wpos.left\n          };\n          var off = self.opt.railhoffset;\n          if (!!off) {\n            if (!!off.top) pos.top += off.top;\n            if (!!off.left) pos.left += off.left;\n          }\n          var y = (self.railh.align) ? pos.top + getWidthToPixel(self.win, 'border-top-width', true) + self.win.innerHeight() - self.railh.height : pos.top + getWidthToPixel(self.win, 'border-top-width', true);\n          var x = pos.left + getWidthToPixel(self.win, 'border-left-width');\n          self.railh.css({\n            top: y  - (self.opt.railpadding.top + self.opt.railpadding.bottom),\n            left: x,\n            width: self.railh.width\n          });\n        }\n\n\n      }\n    };\n\n    this.doRailClick = function(e, dbl, hr) {\n      var fn, pg, cur, pos;\n\n      if (self.railslocked) return;\n      self.cancelEvent(e);\n\n      if (dbl) {\n        fn = (hr) ? self.doScrollLeft : self.doScrollTop;\n        cur = (hr) ? ((e.pageX - self.railh.offset().left - (self.cursorwidth / 2)) * self.scrollratio.x) : ((e.pageY - self.rail.offset().top - (self.cursorheight / 2)) * self.scrollratio.y);\n        fn(cur);\n      } else {\n        fn = (hr) ? self.doScrollLeftBy : self.doScrollBy;\n        cur = (hr) ? self.scroll.x : self.scroll.y;\n        pos = (hr) ? e.pageX - self.railh.offset().left : e.pageY - self.rail.offset().top;\n        pg = (hr) ? self.view.w : self.view.h;\n        fn((cur >= pos) ? pg: -pg);//   (cur >= pos) ? fn(pg): fn(-pg);\n      }\n\n    };\n\n    self.hasanimationframe = (setAnimationFrame);\n    self.hascancelanimationframe = (clearAnimationFrame);\n\n    if (!self.hasanimationframe) {\n      setAnimationFrame = function(fn) {\n        return setTimeout(fn, 15 - Math.floor((+new Date()) / 1000) % 16);\n      }; // 1000/60)};\n      clearAnimationFrame = clearInterval;\n    } else if (!self.hascancelanimationframe) clearAnimationFrame = function() {\n      self.cancelAnimationFrame = true;\n    };\n\n    this.init = function() {\n\n      self.saved.css = [];\n\n      if (cap.isie7mobile) return true; // SORRY, DO NOT WORK!\n      if (cap.isoperamini) return true; // SORRY, DO NOT WORK!\n\n      if (cap.hasmstouch) self.css((self.ispage) ? $(\"html\") : self.win, {\n        '-ms-touch-action': 'none'\n      });\n\n      self.zindex = \"auto\";\n      if (!self.ispage && self.opt.zindex == \"auto\") {\n        self.zindex = getZIndex() || \"auto\";\n      } else {\n        self.zindex = self.opt.zindex;\n      }\n\n      if (!self.ispage && self.zindex != \"auto\") {\n        if (self.zindex > globalmaxzindex) globalmaxzindex = self.zindex;\n      }\n\n      if (self.isie && self.zindex == 0 && self.opt.zindex == \"auto\") { // fix IE auto == 0\n        self.zindex = \"auto\";\n      }\n\n      if (!self.ispage || (!cap.cantouch && !cap.isieold && !cap.isie9mobile)) {\n\n        var cont = self.docscroll;\n        if (self.ispage) cont = (self.haswrapper) ? self.win : self.doc;\n\n        if (!cap.isie9mobile) self.css(cont, {\n          'overflow-y': 'hidden'\n        });\n\n        if (self.ispage && cap.isie7) {\n          if (self.doc[0].nodeName == 'BODY') self.css($(\"html\"), {\n            'overflow-y': 'hidden'\n          }); //IE7 double scrollbar issue\n          else if (self.doc[0].nodeName == 'HTML') self.css($(\"body\"), {\n            'overflow-y': 'hidden'\n          }); //IE7 double scrollbar issue\n        }\n\n        if (cap.isios && !self.ispage && !self.haswrapper) self.css($(\"body\"), {\n          \"-webkit-overflow-scrolling\": \"touch\"\n        }); //force hw acceleration\n\n        var cursor = $(document.createElement('div'));\n        cursor.css({\n          position: \"relative\",\n          top: 0,\n          \"float\": \"right\",\n          width: self.opt.cursorwidth,\n          height: \"0px\",\n          'background-color': self.opt.cursorcolor,\n          border: self.opt.cursorborder,\n          'background-clip': 'padding-box',\n          '-webkit-border-radius': self.opt.cursorborderradius,\n          '-moz-border-radius': self.opt.cursorborderradius,\n          'border-radius': self.opt.cursorborderradius\n        });\n\n        cursor.hborder = parseFloat(cursor.outerHeight() - cursor.innerHeight());\n        \n        cursor.addClass('nicescroll-cursors');\n        \n        self.cursor = cursor;\n\n        var rail = $(document.createElement('div'));\n        rail.attr('id', self.id);\n        rail.addClass('nicescroll-rails nicescroll-rails-vr');\n\n        var v, a, kp = [\"left\",\"right\",\"top\",\"bottom\"];  //**\n        for (var n in kp) {\n          a = kp[n];\n          v = self.opt.railpadding[a];\n          (v) ? rail.css(\"padding-\"+a,v+\"px\") : self.opt.railpadding[a] = 0;\n        }\n\n        rail.append(cursor);\n\n        rail.width = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerWidth());\n        rail.css({\n          width: rail.width + \"px\",\n          'zIndex': self.zindex,\n          \"background\": self.opt.background,\n          cursor: \"default\"\n        });\n\n        rail.visibility = true;\n        rail.scrollable = true;\n\n        rail.align = (self.opt.railalign == \"left\") ? 0 : 1;\n\n        self.rail = rail;\n\n        self.rail.drag = false;\n\n        var zoom = false;\n        if (self.opt.boxzoom && !self.ispage && !cap.isieold) {\n          zoom = document.createElement('div');\n\n          self.bind(zoom, \"click\", self.doZoom);\n          self.bind(zoom, \"mouseenter\", function() {\n            self.zoom.css('opacity', self.opt.cursoropacitymax);\n          });\n          self.bind(zoom, \"mouseleave\", function() {\n            self.zoom.css('opacity', self.opt.cursoropacitymin);\n          });\n\n          self.zoom = $(zoom);\n          self.zoom.css({\n            \"cursor\": \"pointer\",\n            'z-index': self.zindex,\n            'backgroundImage': 'url(' + self.opt.scriptpath + 'zoomico.png)',\n            'height': 18,\n            'width': 18,\n            'backgroundPosition': '0px 0px'\n          });\n          if (self.opt.dblclickzoom) self.bind(self.win, \"dblclick\", self.doZoom);\n          if (cap.cantouch && self.opt.gesturezoom) {\n            self.ongesturezoom = function(e) {\n              if (e.scale > 1.5) self.doZoomIn(e);\n              if (e.scale < 0.8) self.doZoomOut(e);\n              return self.cancelEvent(e);\n            };\n            self.bind(self.win, \"gestureend\", self.ongesturezoom);\n          }\n        }\n\n        // init HORIZ\n\n        self.railh = false;\n        var railh;\n\n        if (self.opt.horizrailenabled) {\n\n          self.css(cont, {\n            'overflow-x': 'hidden'\n          });\n\n          var cursor = $(document.createElement('div'));\n          cursor.css({\n            position: \"absolute\",\n            top: 0,\n            height: self.opt.cursorwidth,\n            width: \"0px\",\n            'background-color': self.opt.cursorcolor,\n            border: self.opt.cursorborder,\n            'background-clip': 'padding-box',\n            '-webkit-border-radius': self.opt.cursorborderradius,\n            '-moz-border-radius': self.opt.cursorborderradius,\n            'border-radius': self.opt.cursorborderradius\n          });\n\n          if (cap.isieold) cursor.css({'overflow':'hidden'});  //IE6 horiz scrollbar issue\n          \n          cursor.wborder = parseFloat(cursor.outerWidth() - cursor.innerWidth());\n          \n          cursor.addClass('nicescroll-cursors');\n          \n          self.cursorh = cursor;\n\n          railh = $(document.createElement('div'));\n          railh.attr('id', self.id + '-hr');\n          railh.addClass('nicescroll-rails nicescroll-rails-hr');\n          railh.height = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerHeight());\n          railh.css({\n            height: railh.height + \"px\",\n            'zIndex': self.zindex,\n            \"background\": self.opt.background\n          });\n\n          railh.append(cursor);\n\n          railh.visibility = true;\n          railh.scrollable = true;\n\n          railh.align = (self.opt.railvalign == \"top\") ? 0 : 1;\n\n          self.railh = railh;\n\n          self.railh.drag = false;\n\n        }\n\n        //        \n\n        if (self.ispage) {\n          rail.css({\n            position: \"fixed\",\n            top: \"0px\",\n            height: \"100%\"\n          });\n          (rail.align) ? rail.css({\n            right: \"0px\"\n          }): rail.css({\n            left: \"0px\"\n          });\n          self.body.append(rail);\n          if (self.railh) {\n            railh.css({\n              position: \"fixed\",\n              left: \"0px\",\n              width: \"100%\"\n            });\n            (railh.align) ? railh.css({\n              bottom: \"0px\"\n            }): railh.css({\n              top: \"0px\"\n            });\n            self.body.append(railh);\n          }\n        } else {\n          if (self.ishwscroll) {\n            if (self.win.css('position') == 'static') self.css(self.win, {\n              'position': 'relative'\n            });\n            var bd = (self.win[0].nodeName == 'HTML') ? self.body : self.win;\n            $(bd).scrollTop(0).scrollLeft(0);  // fix rail position if content already scrolled\n            if (self.zoom) {\n              self.zoom.css({\n                position: \"absolute\",\n                top: 1,\n                right: 0,\n                \"margin-right\": rail.width + 4\n              });\n              bd.append(self.zoom);\n            }\n            rail.css({\n              position: \"absolute\",\n              top: 0\n            });\n            (rail.align) ? rail.css({\n              right: 0\n            }): rail.css({\n              left: 0\n            });\n            bd.append(rail);\n            if (railh) {\n              railh.css({\n                position: \"absolute\",\n                left: 0,\n                bottom: 0\n              });\n              (railh.align) ? railh.css({\n                bottom: 0\n              }): railh.css({\n                top: 0\n              });\n              bd.append(railh);\n            }\n          } else {\n            self.isfixed = (self.win.css(\"position\") == \"fixed\");\n            var rlpos = (self.isfixed) ? \"fixed\" : \"absolute\";\n\n            if (!self.isfixed) self.viewport = self.getViewport(self.win[0]);\n            if (self.viewport) {\n              self.body = self.viewport;\n              if ((/fixed|absolute/.test(self.viewport.css(\"position\"))) == false) self.css(self.viewport, {\n                \"position\": \"relative\"\n              });\n            }\n\n            rail.css({\n              position: rlpos\n            });\n            if (self.zoom) self.zoom.css({\n              position: rlpos\n            });\n            self.updateScrollBar();\n            self.body.append(rail);\n            if (self.zoom) self.body.append(self.zoom);\n            if (self.railh) {\n              railh.css({\n                position: rlpos\n              });\n              self.body.append(railh);\n            }\n          }\n\n          if (cap.isios) self.css(self.win, {\n            '-webkit-tap-highlight-color': 'rgba(0,0,0,0)',\n            '-webkit-touch-callout': 'none'\n          }); // prevent grey layer on click\n\n          if (cap.isie && self.opt.disableoutline) self.win.attr(\"hideFocus\", \"true\"); // IE, prevent dotted rectangle on focused div\n          if (cap.iswebkit && self.opt.disableoutline) self.win.css({\"outline\": \"none\"});  // Webkit outline\n          //if (cap.isopera&&self.opt.disableoutline) self.win.css({\"outline\":\"0\"});  // Opera 12- to test [TODO]\n\n        }\n\n        if (self.opt.autohidemode === false) {\n          self.autohidedom = false;\n          self.rail.css({\n            opacity: self.opt.cursoropacitymax\n          });\n          if (self.railh) self.railh.css({\n            opacity: self.opt.cursoropacitymax\n          });\n        } else if ((self.opt.autohidemode === true) || (self.opt.autohidemode === \"leave\")) {\n          self.autohidedom = $().add(self.rail);\n          if (cap.isie8) self.autohidedom = self.autohidedom.add(self.cursor);\n          if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\n          if (self.railh && cap.isie8) self.autohidedom = self.autohidedom.add(self.cursorh);\n        } else if (self.opt.autohidemode == \"scroll\") {\n          self.autohidedom = $().add(self.rail);\n          if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\n        } else if (self.opt.autohidemode == \"cursor\") {\n          self.autohidedom = $().add(self.cursor);\n          if (self.railh) self.autohidedom = self.autohidedom.add(self.cursorh);\n        } else if (self.opt.autohidemode == \"hidden\") {\n          self.autohidedom = false;\n          self.hide();\n          self.railslocked = false;\n        }\n\n        if (cap.isie9mobile) {\n\n          self.scrollmom = new ScrollMomentumClass2D(self);\n\n          self.onmangotouch = function() {\n            var py = self.getScrollTop();\n            var px = self.getScrollLeft();\n\n            if ((py == self.scrollmom.lastscrolly) && (px == self.scrollmom.lastscrollx)) return true;\n\n            var dfy = py - self.mangotouch.sy;\n            var dfx = px - self.mangotouch.sx;\n            var df = Math.round(Math.sqrt(Math.pow(dfx, 2) + Math.pow(dfy, 2)));\n            if (df == 0) return;\n\n            var dry = (dfy < 0) ? -1 : 1;\n            var drx = (dfx < 0) ? -1 : 1;\n\n            var tm = +new Date();\n            if (self.mangotouch.lazy) clearTimeout(self.mangotouch.lazy);\n\n            if (((tm - self.mangotouch.tm) > 80) || (self.mangotouch.dry != dry) || (self.mangotouch.drx != drx)) {\n              self.scrollmom.stop();\n              self.scrollmom.reset(px, py);\n              self.mangotouch.sy = py;\n              self.mangotouch.ly = py;\n              self.mangotouch.sx = px;\n              self.mangotouch.lx = px;\n              self.mangotouch.dry = dry;\n              self.mangotouch.drx = drx;\n              self.mangotouch.tm = tm;\n            } else {\n\n              self.scrollmom.stop();\n              self.scrollmom.update(self.mangotouch.sx - dfx, self.mangotouch.sy - dfy);\n              self.mangotouch.tm = tm;\n\n              var ds = Math.max(Math.abs(self.mangotouch.ly - py), Math.abs(self.mangotouch.lx - px));\n              self.mangotouch.ly = py;\n              self.mangotouch.lx = px;\n\n              if (ds > 2) {\n                self.mangotouch.lazy = setTimeout(function() {\n                  self.mangotouch.lazy = false;\n                  self.mangotouch.dry = 0;\n                  self.mangotouch.drx = 0;\n                  self.mangotouch.tm = 0;\n                  self.scrollmom.doMomentum(30);\n                }, 100);\n              }\n            }\n          };\n\n          var top = self.getScrollTop();\n          var lef = self.getScrollLeft();\n          self.mangotouch = {\n            sy: top,\n            ly: top,\n            dry: 0,\n            sx: lef,\n            lx: lef,\n            drx: 0,\n            lazy: false,\n            tm: 0\n          };\n\n          self.bind(self.docscroll, \"scroll\", self.onmangotouch);\n\n        } else {\n\n          if (cap.cantouch || self.istouchcapable || self.opt.touchbehavior || cap.hasmstouch) {\n\n            self.scrollmom = new ScrollMomentumClass2D(self);\n\n            self.ontouchstart = function(e) {\n              if (e.pointerType && e.pointerType != 2 && e.pointerType != \"touch\") return false;\n              \n              self.hasmoving = false;\n\n              if (!self.railslocked) {\n\n                var tg;\n                if (cap.hasmstouch) {\n                  tg = (e.target) ? e.target : false;\n                  while (tg) {\n                    var nc = $(tg).getNiceScroll();\n                    if ((nc.length > 0) && (nc[0].me == self.me)) break;\n                    if (nc.length > 0) return false;\n                    if ((tg.nodeName == 'DIV') && (tg.id == self.id)) break;\n                    tg = (tg.parentNode) ? tg.parentNode : false;\n                  }\n                }\n\n                self.cancelScroll();\n\n                tg = self.getTarget(e);\n\n                if (tg) {\n                  var skp = (/INPUT/i.test(tg.nodeName)) && (/range/i.test(tg.type));\n                  if (skp) return self.stopPropagation(e);\n                }\n\n                if (!(\"clientX\" in e) && (\"changedTouches\" in e)) {\n                  e.clientX = e.changedTouches[0].clientX;\n                  e.clientY = e.changedTouches[0].clientY;\n                }\n\n                if (self.forcescreen) {\n                  var le = e;\n                  e = {\n                    \"original\": (e.original) ? e.original : e\n                  };\n                  e.clientX = le.screenX;\n                  e.clientY = le.screenY;\n                }\n\n                self.rail.drag = {\n                  x: e.clientX,\n                  y: e.clientY,\n                  sx: self.scroll.x,\n                  sy: self.scroll.y,\n                  st: self.getScrollTop(),\n                  sl: self.getScrollLeft(),\n                  pt: 2,\n                  dl: false\n                };\n\n                if (self.ispage || !self.opt.directionlockdeadzone) {\n                  self.rail.drag.dl = \"f\";\n                } else {\n\n                  var view = {\n                    w: $(window).width(),\n                    h: $(window).height()\n                  };\n\n                  var page = {\n                    w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\n                    h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n                  };\n\n                  var maxh = Math.max(0, page.h - view.h);\n                  var maxw = Math.max(0, page.w - view.w);\n\n                  if (!self.rail.scrollable && self.railh.scrollable) self.rail.drag.ck = (maxh > 0) ? \"v\" : false;\n                  else if (self.rail.scrollable && !self.railh.scrollable) self.rail.drag.ck = (maxw > 0) ? \"h\" : false;\n                  else self.rail.drag.ck = false;\n                  if (!self.rail.drag.ck) self.rail.drag.dl = \"f\";\n                }\n\n                if (self.opt.touchbehavior && self.isiframe && cap.isie) {\n                  var wp = self.win.position();\n                  self.rail.drag.x += wp.left;\n                  self.rail.drag.y += wp.top;\n                }\n\n                self.hasmoving = false;\n                self.lastmouseup = false;\n                self.scrollmom.reset(e.clientX, e.clientY);\n                \n                if (!cap.cantouch && !this.istouchcapable && !e.pointerType) {       \n                \n                  var ip = (tg) ? /INPUT|SELECT|TEXTAREA/i.test(tg.nodeName) : false;\n                  if (!ip) {\n                    if (!self.ispage && cap.hasmousecapture) tg.setCapture();\n                    if (self.opt.touchbehavior) {\n                      if (tg.onclick && !(tg._onclick || false)) { // intercept DOM0 onclick event\n                        tg._onclick = tg.onclick;\n                        tg.onclick = function(e) {\n                          if (self.hasmoving) return false;\n                          tg._onclick.call(this, e);\n                        };\n                      }\n                      return self.cancelEvent(e);\n                    }\n                    return self.stopPropagation(e);\n                  }\n\n                  if (/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr('type'))) {\n                    pc = {\n                      \"tg\": tg,\n                      \"click\": false\n                    };\n                    self.preventclick = pc;\n                  }\n\n                }\n              }\n\n            };\n\n            self.ontouchend = function(e) {              \n              if (!self.rail.drag) return true;              \n              if (self.rail.drag.pt == 2) {\n                if (e.pointerType && e.pointerType != 2 && e.pointerType != \"touch\") return false;\n                self.scrollmom.doMomentum();\n                self.rail.drag = false;\n                if (self.hasmoving) {\n                  self.lastmouseup = true;\n                  self.hideCursor();\n                  if (cap.hasmousecapture) document.releaseCapture();\n                  if (!cap.cantouch) return self.cancelEvent(e);\n                }\n              }\n              else if (self.rail.drag.pt == 1) {\n                return self.onmouseup(e);\n              }\n\n            };\n\n            var moveneedoffset = (self.opt.touchbehavior && self.isiframe && !cap.hasmousecapture);\n\n            self.ontouchmove = function(e, byiframe) {\n\n              if (!self.rail.drag) return false;\n            \n              if (e.targetTouches && self.opt.preventmultitouchscrolling) {\n                if (e.targetTouches.length > 1) return false; // multitouch\n              }\n            \n              if (e.pointerType && e.pointerType != 2 && e.pointerType != \"touch\") return false;\n          \n              if (self.rail.drag.pt == 2) {\n                if (cap.cantouch && (cap.isios) && (typeof e.original == \"undefined\")) return true; // prevent ios \"ghost\" events by clickable elements\n\n                self.hasmoving = true;\n\n                if (self.preventclick && !self.preventclick.click) {\n                  self.preventclick.click = self.preventclick.tg.onclick || false;\n                  self.preventclick.tg.onclick = self.onpreventclick;\n                }\n\n                var ev = $.extend({\n                  \"original\": e\n                }, e);\n                e = ev;\n\n                if ((\"changedTouches\" in e)) {\n                  e.clientX = e.changedTouches[0].clientX;\n                  e.clientY = e.changedTouches[0].clientY;\n                }\n\n                if (self.forcescreen) {\n                  var le = e;\n                  e = {\n                    \"original\": (e.original) ? e.original : e\n                  };\n                  e.clientX = le.screenX;\n                  e.clientY = le.screenY;\n                }\n\n                var ofy,ofx;\n                ofx = ofy = 0;\n\n                if (moveneedoffset && !byiframe) {\n                  var wp = self.win.position();\n                  ofx = -wp.left;\n                  ofy = -wp.top;\n                }\n\n                var fy = e.clientY + ofy;\n                var my = (fy - self.rail.drag.y);\n                var fx = e.clientX + ofx;\n                var mx = (fx - self.rail.drag.x);\n\n                var ny = self.rail.drag.st - my;\n\n                if (self.ishwscroll && self.opt.bouncescroll) {\n                  if (ny < 0) {\n                    ny = Math.round(ny / 2);\n                    //                    fy = 0;\n                  } else if (ny > self.page.maxh) {\n                    ny = self.page.maxh + Math.round((ny - self.page.maxh) / 2);\n                    //                    fy = 0;\n                  }\n                } else {\n                  if (ny < 0) {\n                    ny = 0;\n                    fy = 0;\n                  }\n                  if (ny > self.page.maxh) {\n                    ny = self.page.maxh;\n                    fy = 0;\n                  }\n                }\n\n                var nx;\n                if (self.railh && self.railh.scrollable) {\n                  nx = (self.isrtlmode) ? mx - self.rail.drag.sl : self.rail.drag.sl - mx;\n\n                  if (self.ishwscroll && self.opt.bouncescroll) {\n                    if (nx < 0) {\n                      nx = Math.round(nx / 2);\n                      //                      fx = 0;\n                    } else if (nx > self.page.maxw) {\n                      nx = self.page.maxw + Math.round((nx - self.page.maxw) / 2);\n                      //                      fx = 0;\n                    }\n                  } else {\n                    if (nx < 0) {\n                      nx = 0;\n                      fx = 0;\n                    }\n                    if (nx > self.page.maxw) {\n                      nx = self.page.maxw;\n                      fx = 0;\n                    }\n                  }\n\n                }\n\n                var grabbed = false;\n                if (self.rail.drag.dl) {\n                  grabbed = true;\n                  if (self.rail.drag.dl == \"v\") nx = self.rail.drag.sl;\n                  else if (self.rail.drag.dl == \"h\") ny = self.rail.drag.st;\n                } else {\n                  var ay = Math.abs(my);\n                  var ax = Math.abs(mx);\n                  var dz = self.opt.directionlockdeadzone;\n                  if (self.rail.drag.ck == \"v\") {\n                    if (ay > dz && (ax <= (ay * 0.3))) {\n                      self.rail.drag = false;\n                      return true;\n                    } else if (ax > dz) {\n                      self.rail.drag.dl = \"f\";\n                      $(\"body\").scrollTop($(\"body\").scrollTop()); // stop iOS native scrolling (when active javascript has blocked)\n                    }\n                  } else if (self.rail.drag.ck == \"h\") {\n                    if (ax > dz && (ay <= (ax * 0.3))) {\n                      self.rail.drag = false;\n                      return true;\n                    } else if (ay > dz) {\n                      self.rail.drag.dl = \"f\";\n                      $(\"body\").scrollLeft($(\"body\").scrollLeft()); // stop iOS native scrolling (when active javascript has blocked)\n                    }\n                  }\n                }\n\n                self.synched(\"touchmove\", function() {\n                  if (self.rail.drag && (self.rail.drag.pt == 2)) {\n                    if (self.prepareTransition) self.prepareTransition(0);\n                    if (self.rail.scrollable) self.setScrollTop(ny);\n                    self.scrollmom.update(fx, fy);\n                    if (self.railh && self.railh.scrollable) {\n                      self.setScrollLeft(nx);\n                      self.showCursor(ny, nx);\n                    } else {\n                      self.showCursor(ny);\n                    }\n                    if (cap.isie10) document.selection.clear();\n                  }\n                });\n\n                if (cap.ischrome && self.istouchcapable) grabbed = false; //chrome touch emulation doesn't like!\n                if (grabbed) return self.cancelEvent(e);\n              }\n              else if (self.rail.drag.pt == 1) { // drag on cursor\n                return self.onmousemove(e);\n              }\n\n            };\n\n          }\n\n          self.onmousedown = function(e, hronly) {\n            if (self.rail.drag && self.rail.drag.pt != 1) return;\n            if (self.railslocked) return self.cancelEvent(e);\n            self.cancelScroll();\n            self.rail.drag = {\n              x: e.clientX,\n              y: e.clientY,\n              sx: self.scroll.x,\n              sy: self.scroll.y,\n              pt: 1,\n              hr: (!!hronly)\n            };\n            var tg = self.getTarget(e);\n            if (!self.ispage && cap.hasmousecapture) tg.setCapture();\n            if (self.isiframe && !cap.hasmousecapture) {\n              self.saved.csspointerevents = self.doc.css(\"pointer-events\");\n              self.css(self.doc, {\n                \"pointer-events\": \"none\"\n              });\n            }\n            self.hasmoving = false;\n            return self.cancelEvent(e);\n          };\n\n          self.onmouseup = function(e) {\n            if (self.rail.drag) {\n              if (self.rail.drag.pt != 1) return true;\n              if (cap.hasmousecapture) document.releaseCapture();\n              if (self.isiframe && !cap.hasmousecapture) self.doc.css(\"pointer-events\", self.saved.csspointerevents);              \n              self.rail.drag = false;\n              //if (!self.rail.active) self.hideCursor();\n              if (self.hasmoving) self.triggerScrollEnd(); // TODO - check &&!self.scrollrunning\n              return self.cancelEvent(e);\n            }\n          };\n\n          self.onmousemove = function(e) {\n            if (self.rail.drag) {\n              if (self.rail.drag.pt != 1) return;\n\n              if (cap.ischrome && e.which == 0) return self.onmouseup(e);\n\n              self.cursorfreezed = true;\n              self.hasmoving = true;\n\n              if (self.rail.drag.hr) {\n                self.scroll.x = self.rail.drag.sx + (e.clientX - self.rail.drag.x);\n                if (self.scroll.x < 0) self.scroll.x = 0;\n                var mw = self.scrollvaluemaxw;\n                if (self.scroll.x > mw) self.scroll.x = mw;\n              } else {\n                self.scroll.y = self.rail.drag.sy + (e.clientY - self.rail.drag.y);\n                if (self.scroll.y < 0) self.scroll.y = 0;\n                var my = self.scrollvaluemax;\n                if (self.scroll.y > my) self.scroll.y = my;\n              }\n\n              self.synched('mousemove', function() {\n                if (self.rail.drag && (self.rail.drag.pt == 1)) {\n                  self.showCursor();\n                  if (self.rail.drag.hr) {\n                    if (self.hasreversehr) {\n                      self.doScrollLeft(self.scrollvaluemaxw-Math.round(self.scroll.x * self.scrollratio.x), self.opt.cursordragspeed);\n                    } else {\n                      self.doScrollLeft(Math.round(self.scroll.x * self.scrollratio.x), self.opt.cursordragspeed);\n                    }\n                  }\n                  else self.doScrollTop(Math.round(self.scroll.y * self.scrollratio.y), self.opt.cursordragspeed);\n                }\n              });\n\n              return self.cancelEvent(e);\n            }\n            /*              \n            else {\n              self.checkarea = true;\n            }\n*/\n          };\n\n          if (cap.cantouch || self.opt.touchbehavior) {\n\n            self.onpreventclick = function(e) {\n              if (self.preventclick) {\n                self.preventclick.tg.onclick = self.preventclick.click;\n                self.preventclick = false;\n                return self.cancelEvent(e);\n              }\n            }\n\n            self.bind(self.win, \"mousedown\", self.ontouchstart); // control content dragging\n\n            self.onclick = (cap.isios) ? false : function(e) {\n              if (self.lastmouseup) {\n                self.lastmouseup = false;\n                return self.cancelEvent(e);\n              } else {\n                return true;\n              }\n            };\n\n            if (self.opt.grabcursorenabled && cap.cursorgrabvalue) {\n              self.css((self.ispage) ? self.doc : self.win, {\n                'cursor': cap.cursorgrabvalue\n              });\n              self.css(self.rail, {\n                'cursor': cap.cursorgrabvalue\n              });\n            }\n\n          } else {\n\n            var checkSelectionScroll = function(e) {\n              if (!self.selectiondrag) return;\n\n              if (e) {\n                var ww = self.win.outerHeight();\n                var df = (e.pageY - self.selectiondrag.top);\n                if (df > 0 && df < ww) df = 0;\n                if (df >= ww) df -= ww;\n                self.selectiondrag.df = df;\n              }\n              if (self.selectiondrag.df == 0) return;\n\n              var rt = -Math.floor(self.selectiondrag.df / 6) * 2;\n              self.doScrollBy(rt);\n\n              self.debounced(\"doselectionscroll\", function() {\n                checkSelectionScroll()\n              }, 50);\n            };\n\n            if (\"getSelection\" in document) { // A grade - Major browsers\n              self.hasTextSelected = function() {\n                return (document.getSelection().rangeCount > 0);\n              };\n            } else if (\"selection\" in document) { //IE9-\n              self.hasTextSelected = function() {\n                return (document.selection.type != \"None\");\n              };\n            } else {\n              self.hasTextSelected = function() { // no support\n                return false;\n              };\n            }\n\n            self.onselectionstart = function(e) {\n/*  More testing - severe chrome issues            \n              if (!self.haswrapper&&(e.which&&e.which==2)) {  // fool browser to manage middle button scrolling\n                self.win.css({'overflow':'auto'});\n                setTimeout(function(){\n                  self.win.css({'overflow':''});\n                },10);                \n                return true;\n              }            \n*/              \n              if (self.ispage) return;\n              self.selectiondrag = self.win.offset();\n            };\n            \n            self.onselectionend = function(e) {\n              self.selectiondrag = false;\n            };\n            self.onselectiondrag = function(e) {\n              if (!self.selectiondrag) return;\n              if (self.hasTextSelected()) self.debounced(\"selectionscroll\", function() {\n                checkSelectionScroll(e)\n              }, 250);\n            };\n\n\n          }\n\n          if (cap.hasw3ctouch) { //IE11+\n            self.css(self.rail, {\n              'touch-action': 'none'\n            });\n            self.css(self.cursor, {\n              'touch-action': 'none'\n            });\n            self.bind(self.win, \"pointerdown\", self.ontouchstart);\n            self.bind(document, \"pointerup\", self.ontouchend);\n            self.bind(document, \"pointermove\", self.ontouchmove);\n          } else if (cap.hasmstouch) { //IE10\n            self.css(self.rail, {\n              '-ms-touch-action': 'none'\n            });\n            self.css(self.cursor, {\n              '-ms-touch-action': 'none'\n            });\n            self.bind(self.win, \"MSPointerDown\", self.ontouchstart);\n            self.bind(document, \"MSPointerUp\", self.ontouchend);\n            self.bind(document, \"MSPointerMove\", self.ontouchmove);\n            self.bind(self.cursor, \"MSGestureHold\", function(e) {\n              e.preventDefault()\n            });\n            self.bind(self.cursor, \"contextmenu\", function(e) {\n              e.preventDefault()\n            });\n          } else if (this.istouchcapable) { //desktop with screen touch enabled\n            self.bind(self.win, \"touchstart\", self.ontouchstart);\n            self.bind(document, \"touchend\", self.ontouchend);\n            self.bind(document, \"touchcancel\", self.ontouchend);\n            self.bind(document, \"touchmove\", self.ontouchmove);\n          }\n\n          \n          if (self.opt.cursordragontouch || (!cap.cantouch && !self.opt.touchbehavior)) {\n\n            self.rail.css({\n              \"cursor\": \"default\"\n            });\n            self.railh && self.railh.css({\n              \"cursor\": \"default\"\n            });\n\n            self.jqbind(self.rail, \"mouseenter\", function() {\n              if (!self.ispage && !self.win.is(\":visible\")) return false;\n              if (self.canshowonmouseevent) self.showCursor();\n              self.rail.active = true;\n            });\n            self.jqbind(self.rail, \"mouseleave\", function() {\n              self.rail.active = false;\n              if (!self.rail.drag) self.hideCursor();\n            });\n\n            if (self.opt.sensitiverail) {\n              self.bind(self.rail, \"click\", function(e) {\n                self.doRailClick(e, false, false)\n              });\n              self.bind(self.rail, \"dblclick\", function(e) {\n                self.doRailClick(e, true, false)\n              });\n              self.bind(self.cursor, \"click\", function(e) {\n                self.cancelEvent(e)\n              });\n              self.bind(self.cursor, \"dblclick\", function(e) {\n                self.cancelEvent(e)\n              });\n            }\n\n            if (self.railh) {\n              self.jqbind(self.railh, \"mouseenter\", function() {\n                if (!self.ispage && !self.win.is(\":visible\")) return false;\n                if (self.canshowonmouseevent) self.showCursor();\n                self.rail.active = true;\n              });\n              self.jqbind(self.railh, \"mouseleave\", function() {\n                self.rail.active = false;\n                if (!self.rail.drag) self.hideCursor();\n              });\n\n              if (self.opt.sensitiverail) {\n                self.bind(self.railh, \"click\", function(e) {\n                  self.doRailClick(e, false, true)\n                });\n                self.bind(self.railh, \"dblclick\", function(e) {\n                  self.doRailClick(e, true, true)\n                });\n                self.bind(self.cursorh, \"click\", function(e) {\n                  self.cancelEvent(e)\n                });\n                self.bind(self.cursorh, \"dblclick\", function(e) {\n                  self.cancelEvent(e)\n                });\n              }\n\n            }\n\n          }\n\n          if (!cap.cantouch && !self.opt.touchbehavior) {\n\n            self.bind((cap.hasmousecapture) ? self.win : document, \"mouseup\", self.onmouseup);\n            self.bind(document, \"mousemove\", self.onmousemove);\n            if (self.onclick) self.bind(document, \"click\", self.onclick);\n\n            self.bind(self.cursor, \"mousedown\", self.onmousedown);\n            self.bind(self.cursor, \"mouseup\", self.onmouseup);\n\n            if (self.railh) {\n              self.bind(self.cursorh, \"mousedown\", function(e) {\n                self.onmousedown(e, true)\n              });\n              self.bind(self.cursorh, \"mouseup\", self.onmouseup);\n            }\n            \n            if (!self.ispage && self.opt.enablescrollonselection) {\n              self.bind(self.win[0], \"mousedown\", self.onselectionstart);\n              self.bind(document, \"mouseup\", self.onselectionend);\n              self.bind(self.cursor, \"mouseup\", self.onselectionend);\n              if (self.cursorh) self.bind(self.cursorh, \"mouseup\", self.onselectionend);\n              self.bind(document, \"mousemove\", self.onselectiondrag);\n            }\n\n            if (self.zoom) {\n              self.jqbind(self.zoom, \"mouseenter\", function() {\n                if (self.canshowonmouseevent) self.showCursor();\n                self.rail.active = true;\n              });\n              self.jqbind(self.zoom, \"mouseleave\", function() {\n                self.rail.active = false;\n                if (!self.rail.drag) self.hideCursor();\n              });\n            }\n\n          } else {\n\n            self.bind((cap.hasmousecapture) ? self.win : document, \"mouseup\", self.ontouchend);\n            self.bind(document, \"mousemove\", self.ontouchmove);\n            if (self.onclick) self.bind(document, \"click\", self.onclick);\n\n            if (self.opt.cursordragontouch) {\n              self.bind(self.cursor, \"mousedown\", self.onmousedown);\n              self.bind(self.cursor, \"mouseup\", self.onmouseup);\n              //self.bind(self.cursor, \"mousemove\", self.onmousemove);\n              self.cursorh && self.bind(self.cursorh, \"mousedown\", function(e) {\n                self.onmousedown(e, true)\n              });\n              //self.cursorh && self.bind(self.cursorh, \"mousemove\", self.onmousemove);\n              self.cursorh && self.bind(self.cursorh, \"mouseup\", self.onmouseup);\n            }\n\n          }\n\n          if (self.opt.enablemousewheel) {\n            if (!self.isiframe) self.bind((cap.isie && self.ispage) ? document : self.win /*self.docscroll*/ , \"mousewheel\", self.onmousewheel);\n            self.bind(self.rail, \"mousewheel\", self.onmousewheel);\n            if (self.railh) self.bind(self.railh, \"mousewheel\", self.onmousewheelhr);\n          }\n\n          if (!self.ispage && !cap.cantouch && !(/HTML|^BODY/.test(self.win[0].nodeName))) {\n            if (!self.win.attr(\"tabindex\")) self.win.attr({\n              \"tabindex\": tabindexcounter++\n            });\n\n            self.jqbind(self.win, \"focus\", function(e) {\n              domfocus = (self.getTarget(e)).id || true;\n              self.hasfocus = true;\n              if (self.canshowonmouseevent) self.noticeCursor();\n            });\n            self.jqbind(self.win, \"blur\", function(e) {\n              domfocus = false;\n              self.hasfocus = false;\n            });\n\n            self.jqbind(self.win, \"mouseenter\", function(e) {\n              mousefocus = (self.getTarget(e)).id || true;\n              self.hasmousefocus = true;\n              if (self.canshowonmouseevent) self.noticeCursor();\n            });\n            self.jqbind(self.win, \"mouseleave\", function() {\n              mousefocus = false;\n              self.hasmousefocus = false;\n              if (!self.rail.drag) self.hideCursor();\n            });\n\n          }\n\n        } // !ie9mobile\n\n        //Thanks to http://www.quirksmode.org !!\n        self.onkeypress = function(e) {\n          if (self.railslocked && self.page.maxh == 0) return true;\n\n          e = (e) ? e : window.e;\n          var tg = self.getTarget(e);\n          if (tg && /INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)) {\n            var tp = tg.getAttribute('type') || tg.type || false;\n            if ((!tp) || !(/submit|button|cancel/i.tp)) return true;\n          }\n\n          if ($(tg).attr('contenteditable')) return true;\n\n          if (self.hasfocus || (self.hasmousefocus && !domfocus) || (self.ispage && !domfocus && !mousefocus)) {\n            var key = e.keyCode;\n\n            if (self.railslocked && key != 27) return self.cancelEvent(e);\n\n            var ctrl = e.ctrlKey || false;\n            var shift = e.shiftKey || false;\n\n            var ret = false;\n            switch (key) {\n              case 38:\n              case 63233: //safari\n                self.doScrollBy(24 * 3);\n                ret = true;\n                break;\n              case 40:\n              case 63235: //safari\n                self.doScrollBy(-24 * 3);\n                ret = true;\n                break;\n              case 37:\n              case 63232: //safari\n                if (self.railh) {\n                  (ctrl) ? self.doScrollLeft(0): self.doScrollLeftBy(24 * 3);\n                  ret = true;\n                }\n                break;\n              case 39:\n              case 63234: //safari\n                if (self.railh) {\n                  (ctrl) ? self.doScrollLeft(self.page.maxw): self.doScrollLeftBy(-24 * 3);\n                  ret = true;\n                }\n                break;\n              case 33:\n              case 63276: // safari\n                self.doScrollBy(self.view.h);\n                ret = true;\n                break;\n              case 34:\n              case 63277: // safari\n                self.doScrollBy(-self.view.h);\n                ret = true;\n                break;\n              case 36:\n              case 63273: // safari                \n                (self.railh && ctrl) ? self.doScrollPos(0, 0): self.doScrollTo(0);\n                ret = true;\n                break;\n              case 35:\n              case 63275: // safari\n                (self.railh && ctrl) ? self.doScrollPos(self.page.maxw, self.page.maxh): self.doScrollTo(self.page.maxh);\n                ret = true;\n                break;\n              case 32:\n                if (self.opt.spacebarenabled) {\n                  (shift) ? self.doScrollBy(self.view.h): self.doScrollBy(-self.view.h);\n                  ret = true;\n                }\n                break;\n              case 27: // ESC\n                if (self.zoomactive) {\n                  self.doZoom();\n                  ret = true;\n                }\n                break;\n            }\n            if (ret) return self.cancelEvent(e);\n          }\n        };\n\n        if (self.opt.enablekeyboard) self.bind(document, (cap.isopera && !cap.isopera12) ? \"keypress\" : \"keydown\", self.onkeypress);\n\n        self.bind(document, \"keydown\", function(e) {\n          var ctrl = e.ctrlKey || false;\n          if (ctrl) self.wheelprevented = true;\n        });\n        self.bind(document, \"keyup\", function(e) {\n          var ctrl = e.ctrlKey || false;\n          if (!ctrl) self.wheelprevented = false;\n        });\n        self.bind(window,\"blur\",function(e){\n          self.wheelprevented = false;\n        });        \n\n        self.bind(window, 'resize', self.lazyResize);\n        self.bind(window, 'orientationchange', self.lazyResize);\n\n        self.bind(window, \"load\", self.lazyResize);\n\n        if (cap.ischrome && !self.ispage && !self.haswrapper) { //chrome void scrollbar bug - it persists in version 26\n          var tmp = self.win.attr(\"style\");\n          var ww = parseFloat(self.win.css(\"width\")) + 1;\n          self.win.css('width', ww);\n          self.synched(\"chromefix\", function() {\n            self.win.attr(\"style\", tmp)\n          });\n        }\n\n\n        // Trying a cross-browser implementation - good luck!\n\n        self.onAttributeChange = function(e) {\n          self.lazyResize(self.isieold ? 250 : 30);\n        };\n\n        if (ClsMutationObserver !== false) {\n          self.observerbody = new ClsMutationObserver(function(mutations) {\n            mutations.forEach(function(mut){\n              if (mut.type==\"attributes\") {\n                return ($(\"body\").hasClass(\"modal-open\")) ? self.hide() : self.show();  // Support for Bootstrap modal\n              }\n            });  \n            if (document.body.scrollHeight!=self.page.maxh) return self.lazyResize(30);\n          });\n          self.observerbody.observe(document.body, {\n            childList: true,\n            subtree: true,\n            characterData: false,\n            attributes: true,\n            attributeFilter: ['class']\n          });\n        }\n        \n        if (!self.ispage && !self.haswrapper) {\n          // redesigned MutationObserver for Chrome18+/Firefox14+/iOS6+ with support for: remove div, add/remove content\n          if (ClsMutationObserver !== false) {\n            self.observer = new ClsMutationObserver(function(mutations) {\n              mutations.forEach(self.onAttributeChange);\n            });\n            self.observer.observe(self.win[0], {\n              childList: true,\n              characterData: false,\n              attributes: true,\n              subtree: false\n            });\n            self.observerremover = new ClsMutationObserver(function(mutations) {\n              mutations.forEach(function(mo) {\n                if (mo.removedNodes.length > 0) {\n                  for (var dd in mo.removedNodes) {\n                    if (!!self && (mo.removedNodes[dd] == self.win[0])) return self.remove();\n                  }\n                }\n              });\n            });\n            self.observerremover.observe(self.win[0].parentNode, {\n              childList: true,\n              characterData: false,\n              attributes: false,\n              subtree: false\n            });\n          } else {\n            self.bind(self.win, (cap.isie && !cap.isie9) ? \"propertychange\" : \"DOMAttrModified\", self.onAttributeChange);\n            if (cap.isie9) self.win[0].attachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\n            self.bind(self.win, \"DOMNodeRemoved\", function(e) {\n              if (e.target == self.win[0]) self.remove();\n            });\n          }\n        }\n\n        //\n\n        if (!self.ispage && self.opt.boxzoom) self.bind(window, \"resize\", self.resizeZoom);\n        if (self.istextarea) self.bind(self.win, \"mouseup\", self.lazyResize);\n\n        //        self.checkrtlmode = true;\n        self.lazyResize(30);\n\n      }\n      \n      if (this.doc[0].nodeName == 'IFRAME') {\n        var oniframeload = function() {\n          self.iframexd = false;\n          var doc;\n          try {\n            doc = 'contentDocument' in this ? this.contentDocument : this.contentWindow.document;\n            var a = doc.domain;\n          } catch (e) {\n            self.iframexd = true;\n            doc = false\n          }\n          \n          if (self.iframexd) {\n            if (\"console\" in window) console.log('NiceScroll error: policy restriced iframe');\n            return true; //cross-domain - I can't manage this        \n          }\n\n          self.forcescreen = true;\n\n          if (self.isiframe) {\n            self.iframe = {\n              \"doc\": $(doc),\n              \"html\": self.doc.contents().find('html')[0],\n              \"body\": self.doc.contents().find('body')[0]\n            };\n            self.getContentSize = function() {\n              return {\n                w: Math.max(self.iframe.html.scrollWidth, self.iframe.body.scrollWidth),\n                h: Math.max(self.iframe.html.scrollHeight, self.iframe.body.scrollHeight)\n              };\n            };\n            self.docscroll = $(self.iframe.body); //$(this.contentWindow);\n          }\n\n          if (!cap.isios && self.opt.iframeautoresize && !self.isiframe) {\n            self.win.scrollTop(0); // reset position\n            self.doc.height(\"\"); //reset height to fix browser bug\n            var hh = Math.max(doc.getElementsByTagName('html')[0].scrollHeight, doc.body.scrollHeight);\n            self.doc.height(hh);\n          }\n          self.lazyResize(30);\n\n          if (cap.isie7) self.css($(self.iframe.html), {\n            'overflow-y': 'hidden'\n          });\n          self.css($(self.iframe.body), {\n            'overflow-y': 'hidden'\n          });\n\n          if (cap.isios && self.haswrapper) {\n            self.css($(doc.body), {\n              '-webkit-transform': 'translate3d(0,0,0)'\n            }); // avoid iFrame content clipping - thanks to http://blog.derraab.com/2012/04/02/avoid-iframe-content-clipping-with-css-transform-on-ios/\n          }\n\n          if ('contentWindow' in this) {\n            self.bind(this.contentWindow, \"scroll\", self.onscroll); //IE8 & minor\n          } else {\n            self.bind(doc, \"scroll\", self.onscroll);\n          }\n\n          if (self.opt.enablemousewheel) {\n            self.bind(doc, \"mousewheel\", self.onmousewheel);\n          }\n\n          if (self.opt.enablekeyboard) self.bind(doc, (cap.isopera) ? \"keypress\" : \"keydown\", self.onkeypress);\n\n          if (cap.cantouch || self.opt.touchbehavior) {\n            self.bind(doc, \"mousedown\", self.ontouchstart);\n            self.bind(doc, \"mousemove\", function(e) {\n              return self.ontouchmove(e, true)\n            });\n            if (self.opt.grabcursorenabled && cap.cursorgrabvalue) self.css($(doc.body), {\n              'cursor': cap.cursorgrabvalue\n            });\n          }\n\n          self.bind(doc, \"mouseup\", self.ontouchend);\n\n          if (self.zoom) {\n            if (self.opt.dblclickzoom) self.bind(doc, 'dblclick', self.doZoom);\n            if (self.ongesturezoom) self.bind(doc, \"gestureend\", self.ongesturezoom);\n          }\n        };\n\n        if (this.doc[0].readyState && this.doc[0].readyState == \"complete\") {\n          setTimeout(function() {\n            oniframeload.call(self.doc[0], false)\n          }, 500);\n        }\n        self.bind(this.doc, \"load\", oniframeload);\n\n      }\n\n    };\n\n    this.showCursor = function(py, px) {\n      if (self.cursortimeout) {\n        clearTimeout(self.cursortimeout);\n        self.cursortimeout = 0;\n      }\n      if (!self.rail) return;\n      if (self.autohidedom) {\n        self.autohidedom.stop().css({\n          opacity: self.opt.cursoropacitymax\n        });\n        self.cursoractive = true;\n      }\n\n      if (!self.rail.drag || self.rail.drag.pt != 1) {\n        if ((typeof py != \"undefined\") && (py !== false)) {\n          self.scroll.y = Math.round(py * 1 / self.scrollratio.y);\n        }\n        if (typeof px != \"undefined\") {\n          self.scroll.x = Math.round(px * 1 / self.scrollratio.x);\n        }\n      }\n\n      self.cursor.css({\n        height: self.cursorheight,\n        top: self.scroll.y\n      });\n      if (self.cursorh) {        \n        var lx = (self.hasreversehr) ? self.scrollvaluemaxw-self.scroll.x : self.scroll.x;\n        (!self.rail.align && self.rail.visibility) ? self.cursorh.css({\n          width: self.cursorwidth,\n          left: lx + self.rail.width\n        }): self.cursorh.css({\n          width: self.cursorwidth,\n          left: lx\n        });\n        self.cursoractive = true;\n      }\n\n      if (self.zoom) self.zoom.stop().css({\n        opacity: self.opt.cursoropacitymax\n      });\n    };\n\n    this.hideCursor = function(tm) {\n      if (self.cursortimeout) return;\n      if (!self.rail) return;\n      if (!self.autohidedom) return;\n      if (self.hasmousefocus && self.opt.autohidemode == \"leave\") return;\n      self.cursortimeout = setTimeout(function() {\n        if (!self.rail.active || !self.showonmouseevent) {\n          self.autohidedom.stop().animate({\n            opacity: self.opt.cursoropacitymin\n          });\n          if (self.zoom) self.zoom.stop().animate({\n            opacity: self.opt.cursoropacitymin\n          });\n          self.cursoractive = false;\n        }\n        self.cursortimeout = 0;\n      }, tm || self.opt.hidecursordelay);\n    };\n\n    this.noticeCursor = function(tm, py, px) {\n      self.showCursor(py, px);\n      if (!self.rail.active) self.hideCursor(tm);\n    };\n\n    this.getContentSize =\n      (self.ispage) ?\n      function() {\n        return {\n          w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\n          h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n        }\n      } : (self.haswrapper) ?\n      function() {\n        return {\n          w: self.doc.outerWidth() + parseInt(self.win.css('paddingLeft')) + parseInt(self.win.css('paddingRight')),\n          h: self.doc.outerHeight() + parseInt(self.win.css('paddingTop')) + parseInt(self.win.css('paddingBottom'))\n        }\n      } : function() {\n        return {\n          w: self.docscroll[0].scrollWidth,\n          h: self.docscroll[0].scrollHeight\n        }\n      };\n\n    this.onResize = function(e, page) {\n    \n      if (!self || !self.win) return false;\n\n      if (!self.haswrapper && !self.ispage) {\n        if (self.win.css('display') == 'none') {\n          if (self.visibility) self.hideRail().hideRailHr();\n          return false;\n        } else {\n          if (!self.hidden && !self.visibility) self.showRail().showRailHr();\n        }\n      }\n\n      var premaxh = self.page.maxh;\n      var premaxw = self.page.maxw;\n\n      var preview = {\n        h: self.view.h,\n        w: self.view.w\n      };\n\n      self.view = {\n        w: (self.ispage) ? self.win.width() : parseInt(self.win[0].clientWidth),\n        h: (self.ispage) ? self.win.height() : parseInt(self.win[0].clientHeight)\n      };\n\n      self.page = (page) ? page : self.getContentSize();\n\n      self.page.maxh = Math.max(0, self.page.h - self.view.h);\n      self.page.maxw = Math.max(0, self.page.w - self.view.w);\n      \n      if ((self.page.maxh == premaxh) && (self.page.maxw == premaxw) && (self.view.w == preview.w) && (self.view.h == preview.h)) {\n        // test position        \n        if (!self.ispage) {\n          var pos = self.win.offset();\n          if (self.lastposition) {\n            var lst = self.lastposition;\n            if ((lst.top == pos.top) && (lst.left == pos.left)) return self; //nothing to do            \n          }\n          self.lastposition = pos;\n        } else {\n          return self; //nothing to do\n        }\n      }\n\n      if (self.page.maxh == 0) {\n        self.hideRail();\n        self.scrollvaluemax = 0;\n        self.scroll.y = 0;\n        self.scrollratio.y = 0;\n        self.cursorheight = 0;\n        self.setScrollTop(0);\n        self.rail.scrollable = false;\n      } else {\n        self.page.maxh -= (self.opt.railpadding.top + self.opt.railpadding.bottom);  //**\n        self.rail.scrollable = true;\n      }\n\n      if (self.page.maxw == 0) {\n        self.hideRailHr();\n        self.scrollvaluemaxw = 0;\n        self.scroll.x = 0;\n        self.scrollratio.x = 0;\n        self.cursorwidth = 0;\n        self.setScrollLeft(0);\n        self.railh.scrollable = false;\n      } else {\n        self.page.maxw -= (self.opt.railpadding.left + self.opt.railpadding.right);  //**\n        self.railh.scrollable = true;\n      }\n\n      self.railslocked = (self.locked) || ((self.page.maxh == 0) && (self.page.maxw == 0));\n      if (self.railslocked) {\n        if (!self.ispage) self.updateScrollBar(self.view);\n        return false;\n      }\n\n      if (!self.hidden && !self.visibility) {\n        self.showRail().showRailHr();\n      }\n      else if (!self.hidden && !self.railh.visibility) self.showRailHr();\n\n      if (self.istextarea && self.win.css('resize') && self.win.css('resize') != 'none') self.view.h -= 20;\n\n      self.cursorheight = Math.min(self.view.h, Math.round(self.view.h * (self.view.h / self.page.h)));\n      self.cursorheight = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorheight);\n\n      self.cursorwidth = Math.min(self.view.w, Math.round(self.view.w * (self.view.w / self.page.w)));\n      self.cursorwidth = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorwidth);\n\n      self.scrollvaluemax = self.view.h - self.cursorheight - self.cursor.hborder - (self.opt.railpadding.top + self.opt.railpadding.bottom);  //**\n\n      if (self.railh) {\n        self.railh.width = (self.page.maxh > 0) ? (self.view.w - self.rail.width) : self.view.w;\n        self.scrollvaluemaxw = self.railh.width - self.cursorwidth - self.cursorh.wborder - (self.opt.railpadding.left + self.opt.railpadding.right);  //**\n      }\n\n      /*\n      if (self.checkrtlmode&&self.railh) {\n        self.checkrtlmode = false;\n        if (self.opt.rtlmode&&self.scroll.x==0) self.setScrollLeft(self.page.maxw);\n      }\n*/\n\n      if (!self.ispage) self.updateScrollBar(self.view);\n\n      self.scrollratio = {\n        x: (self.page.maxw / self.scrollvaluemaxw),\n        y: (self.page.maxh / self.scrollvaluemax)\n      };\n\n      var sy = self.getScrollTop();\n      if (sy > self.page.maxh) {\n        self.doScrollTop(self.page.maxh);\n      } else {\n        self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\n        self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\n        if (self.cursoractive) self.noticeCursor();\n      }\n\n      if (self.scroll.y && (self.getScrollTop() == 0)) self.doScrollTo(Math.floor(self.scroll.y * self.scrollratio.y));\n\n      return self;\n    };\n\n    this.resize = self.onResize;\n\n    this.lazyResize = function(tm) { // event debounce\n      tm = (isNaN(tm)) ? 30 : tm;\n      self.debounced('resize', self.resize, tm);\n      return self;\n    };\n\n    // modified by MDN https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/wheel\n    function _modernWheelEvent(dom, name, fn, bubble) {\n      self._bind(dom, name, function(e) {\n        var e = (e) ? e : window.event;\n        var event = {\n          original: e,\n          target: e.target || e.srcElement,\n          type: \"wheel\",\n          deltaMode: e.type == \"MozMousePixelScroll\" ? 0 : 1,\n          deltaX: 0,\n          deltaZ: 0,\n          preventDefault: function() {\n            e.preventDefault ? e.preventDefault() : e.returnValue = false;\n            return false;\n          },\n          stopImmediatePropagation: function() {\n            (e.stopImmediatePropagation) ? e.stopImmediatePropagation(): e.cancelBubble = true;\n          }\n        };\n\n        if (name == \"mousewheel\") {\n          event.deltaY = -1 / 40 * e.wheelDelta;\n          e.wheelDeltaX && (event.deltaX = -1 / 40 * e.wheelDeltaX);\n        } else {\n          event.deltaY = e.detail;\n        }\n\n        return fn.call(dom, event);\n      }, bubble);\n    };\n\n\n\n    this.jqbind = function(dom, name, fn) { // use jquery bind for non-native events (mouseenter/mouseleave)\n      self.events.push({\n        e: dom,\n        n: name,\n        f: fn,\n        q: true\n      });\n      $(dom).bind(name, fn);\n    };\n\n    this.bind = function(dom, name, fn, bubble) { // touch-oriented & fixing jquery bind\n      var el = (\"jquery\" in dom) ? dom[0] : dom;\n\n      if (name == 'mousewheel') {\n        if (window.addEventListener||'onwheel' in document) { // modern brosers & IE9 detection fix\n          self._bind(el, \"wheel\", fn, bubble || false);\n        } else {\n          var wname = (typeof document.onmousewheel != \"undefined\") ? \"mousewheel\" : \"DOMMouseScroll\"; // older IE/Firefox\n          _modernWheelEvent(el, wname, fn, bubble || false);\n          if (wname == \"DOMMouseScroll\") _modernWheelEvent(el, \"MozMousePixelScroll\", fn, bubble || false); // Firefox legacy\n        }\n      } else if (el.addEventListener) {\n        if (cap.cantouch && /mouseup|mousedown|mousemove/.test(name)) { // touch device support\n          var tt = (name == 'mousedown') ? 'touchstart' : (name == 'mouseup') ? 'touchend' : 'touchmove';\n          self._bind(el, tt, function(e) {\n            if (e.touches) {\n              if (e.touches.length < 2) {\n                var ev = (e.touches.length) ? e.touches[0] : e;\n                ev.original = e;\n                fn.call(this, ev);\n              }\n            } else if (e.changedTouches) {\n              var ev = e.changedTouches[0];\n              ev.original = e;\n              fn.call(this, ev);\n            } //blackberry\n          }, bubble || false);\n        }\n        self._bind(el, name, fn, bubble || false);\n        if (cap.cantouch && name == \"mouseup\") self._bind(el, \"touchcancel\", fn, bubble || false);\n      } else {\n        self._bind(el, name, function(e) {\n          e = e || window.event || false;\n          if (e) {\n            if (e.srcElement) e.target = e.srcElement;\n          }\n          if (!(\"pageY\" in e)) {\n            e.pageX = e.clientX + document.documentElement.scrollLeft;\n            e.pageY = e.clientY + document.documentElement.scrollTop;\n          }\n          return ((fn.call(el, e) === false) || bubble === false) ? self.cancelEvent(e) : true;\n        });\n      }\n    };\n\n    if (cap.haseventlistener) {  // W3C standard model\n      this._bind = function(el, name, fn, bubble) { // primitive bind\n        self.events.push({\n          e: el,\n          n: name,\n          f: fn,\n          b: bubble,\n          q: false\n        });\n        el.addEventListener(name, fn, bubble || false);\n      };    \n      this.cancelEvent = function(e) {\n        if (!e) return false;\n        var e = (e.original) ? e.original : e;\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.preventManipulation) e.preventManipulation(); //IE10\n        return false;\n      };\n      this.stopPropagation = function(e) {\n        if (!e) return false;\n        var e = (e.original) ? e.original : e;\n        e.stopPropagation();\n        return false;\n      };\n      this._unbind = function(el, name, fn, bub) { // primitive unbind\n        el.removeEventListener(name, fn, bub);\n      };\n    } else {  // old IE model\n      this._bind = function(el, name, fn, bubble) { // primitive bind\n        self.events.push({\n          e: el,\n          n: name,\n          f: fn,\n          b: bubble,\n          q: false\n        });\n        if (el.attachEvent) {\n          el.attachEvent(\"on\" + name, fn);\n        } else {\n          el[\"on\" + name] = fn;\n        }\n      };    \n      // Thanks to http://www.switchonthecode.com !!\n      this.cancelEvent = function(e) {\n        var e = window.event || false;\n        if (!e) return false;\n        e.cancelBubble = true;\n        e.cancel = true;\n        e.returnValue = false;\n        return false;\n      };\n      this.stopPropagation = function(e) {\n        var e = window.event || false;\n        if (!e) return false;\n        e.cancelBubble = true;\n        return false;\n      };\n      this._unbind = function(el, name, fn, bub) { // primitive unbind IE old\n        if (el.detachEvent) {\n          el.detachEvent('on' + name, fn);\n        } else {\n          el['on' + name] = false;\n        }\n      };\n    }\n    \n    this.unbindAll = function() {\n      for (var a = 0; a < self.events.length; a++) {\n        var r = self.events[a];\n        (r.q) ? r.e.unbind(r.n, r.f): self._unbind(r.e, r.n, r.f, r.b);\n      }\n    };\n\n    this.showRail = function() {\n      if ((self.page.maxh != 0) && (self.ispage || self.win.css('display') != 'none')) {\n        self.visibility = true;\n        self.rail.visibility = true;\n        self.rail.css('display', 'block');\n      }\n      return self;\n    };\n\n    this.showRailHr = function() {\n      if (!self.railh) return self;\n      if ((self.page.maxw != 0) && (self.ispage || self.win.css('display') != 'none')) {\n        self.railh.visibility = true;\n        self.railh.css('display', 'block');\n      }\n      return self;\n    };\n\n    this.hideRail = function() {\n      self.visibility = false;\n      self.rail.visibility = false;\n      self.rail.css('display', 'none');\n      return self;\n    };\n\n    this.hideRailHr = function() {\n      if (!self.railh) return self;\n      self.railh.visibility = false;\n      self.railh.css('display', 'none');\n      return self;\n    };\n\n    this.show = function() {\n      self.hidden = false;\n      self.railslocked = false;\n      return self.showRail().showRailHr();\n    };\n\n    this.hide = function() {\n      self.hidden = true;\n      self.railslocked = true;\n      return self.hideRail().hideRailHr();\n    };\n\n    this.toggle = function() {\n      return (self.hidden) ? self.show() : self.hide();\n    };\n\n    this.remove = function() {\n      self.stop();\n      if (self.cursortimeout) clearTimeout(self.cursortimeout);\n      self.doZoomOut();\n      self.unbindAll();\n\n      if (cap.isie9) self.win[0].detachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\n\n      if (self.observer !== false) self.observer.disconnect();\n      if (self.observerremover !== false) self.observerremover.disconnect();\n      if (self.observerbody !== false) self.observerbody.disconnect();\n\n      self.events = null;\n\n      if (self.cursor) {\n        self.cursor.remove();\n      }\n      if (self.cursorh) {\n        self.cursorh.remove();\n      }\n      if (self.rail) {\n        self.rail.remove();\n      }\n      if (self.railh) {\n        self.railh.remove();\n      }\n      if (self.zoom) {\n        self.zoom.remove();\n      }\n      for (var a = 0; a < self.saved.css.length; a++) {\n        var d = self.saved.css[a];\n        d[0].css(d[1], (typeof d[2] == \"undefined\") ? '' : d[2]);\n      }\n      self.saved = false;\n      self.me.data('__nicescroll', ''); //erase all traces\n\n      // memory leak fixed by GianlucaGuarini - thanks a lot!\n      // remove the current nicescroll from the $.nicescroll array & normalize array\n      var lst = $.nicescroll;\n      lst.each(function(i) {\n        if (!this) return;\n        if (this.id === self.id) {\n          delete lst[i];\n          for (var b = ++i; b < lst.length; b++, i++) lst[i] = lst[b];\n          lst.length--;\n          if (lst.length) delete lst[lst.length];\n        }\n      });\n\n      for (var i in self) {\n        self[i] = null;\n        delete self[i];\n      }\n\n      self = null;\n\n    };\n\n    this.scrollstart = function(fn) {\n      this.onscrollstart = fn;\n      return self;\n    };\n    this.scrollend = function(fn) {\n      this.onscrollend = fn;\n      return self;\n    };\n    this.scrollcancel = function(fn) {\n      this.onscrollcancel = fn;\n      return self;\n    };\n\n    this.zoomin = function(fn) {\n      this.onzoomin = fn;\n      return self;\n    };\n    this.zoomout = function(fn) {\n      this.onzoomout = fn;\n      return self;\n    };\n\n    this.isScrollable = function(e) {\n      var dom = (e.target) ? e.target : e;\n      if (dom.nodeName == 'OPTION') return true;\n      while (dom && (dom.nodeType == 1) && !(/^BODY|HTML/.test(dom.nodeName))) {\n        var dd = $(dom);\n        var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\n        if (/scroll|auto/.test(ov)) return (dom.clientHeight != dom.scrollHeight);\n        dom = (dom.parentNode) ? dom.parentNode : false;\n      }\n      return false;\n    };\n\n    this.getViewport = function(me) {\n      var dom = (me && me.parentNode) ? me.parentNode : false;\n      while (dom && (dom.nodeType == 1) && !(/^BODY|HTML/.test(dom.nodeName))) {\n        var dd = $(dom);\n        if (/fixed|absolute/.test(dd.css(\"position\"))) return dd;\n        var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\n        if ((/scroll|auto/.test(ov)) && (dom.clientHeight != dom.scrollHeight)) return dd;\n        if (dd.getNiceScroll().length > 0) return dd;\n        dom = (dom.parentNode) ? dom.parentNode : false;\n      }\n      return false; //(dom) ? $(dom) : false;\n    };\n\n    this.triggerScrollEnd = function() {\n      if (!self.onscrollend) return;\n\n      var px = self.getScrollLeft();\n      var py = self.getScrollTop();\n\n      var info = {\n        \"type\": \"scrollend\",\n        \"current\": {\n          \"x\": px,\n          \"y\": py\n        },\n        \"end\": {\n          \"x\": px,\n          \"y\": py\n        }\n      };\n      self.onscrollend.call(self, info);\n    }\n\n    function execScrollWheel(e, hr, chkscroll) {\n      var px, py;\n      \n      if (e.deltaMode == 0) { // PIXEL\n        px = -Math.floor(e.deltaX * (self.opt.mousescrollstep / (18 * 3)));\n        py = -Math.floor(e.deltaY * (self.opt.mousescrollstep / (18 * 3)));\n      } else if (e.deltaMode == 1) { // LINE\n        px = -Math.floor(e.deltaX * self.opt.mousescrollstep);\n        py = -Math.floor(e.deltaY * self.opt.mousescrollstep);\n      }\n\n      if (hr && self.opt.oneaxismousemode && (px == 0) && py) { // classic vertical-only mousewheel + browser with x/y support \n        px = py;\n        py = 0;\n      \n        if (chkscroll) {\n          var hrend = (px < 0) ? (self.getScrollLeft() >= self.page.maxw) : (self.getScrollLeft() <= 0);\n          if (hrend) {  // preserve vertical scrolling\n            py = px;\n            px = 0;            \n          }\n        }\n        \n      }\n\n      if (px) {\n        if (self.scrollmom) {\n          self.scrollmom.stop()\n        }\n        self.lastdeltax += px;\n        self.debounced(\"mousewheelx\", function() {\n          var dt = self.lastdeltax;\n          self.lastdeltax = 0;\n          if (!self.rail.drag) {\n            self.doScrollLeftBy(dt)\n          }\n        }, 15);\n      }\n      if (py) {\n        if (self.opt.nativeparentscrolling && chkscroll && !self.ispage && !self.zoomactive) {\n          if (py < 0) {\n            if (self.getScrollTop() >= self.page.maxh) return true;\n          } else {\n            if (self.getScrollTop() <= 0) return true;\n          }\n        }\n        if (self.scrollmom) {\n          self.scrollmom.stop()\n        }\n        self.lastdeltay += py;\n        self.debounced(\"mousewheely\", function() {\n          var dt = self.lastdeltay;\n          self.lastdeltay = 0;\n          if (!self.rail.drag) {\n            self.doScrollBy(dt)\n          }\n        }, 15);\n      }\n\n      e.stopImmediatePropagation();\n      return e.preventDefault();\n    };\n\n    this.onmousewheel = function(e) {\n      if (self.wheelprevented) return;\n      if (self.railslocked) {\n        self.debounced(\"checkunlock\", self.resize, 250);\n        return true;\n      }\n      if (self.rail.drag) return self.cancelEvent(e);\n\n      if (self.opt.oneaxismousemode == \"auto\" && e.deltaX != 0) self.opt.oneaxismousemode = false; // check two-axis mouse support (not very elegant)\n\n      if (self.opt.oneaxismousemode && e.deltaX == 0) {\n        if (!self.rail.scrollable) {\n          if (self.railh && self.railh.scrollable) {\n            return self.onmousewheelhr(e);\n          } else {\n            return true;\n          }\n        }\n      }\n\n      var nw = +(new Date());\n      var chk = false;\n      if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {\n        self.nativescrollingarea = self.isScrollable(e);\n        chk = true;\n      }\n      self.checkarea = nw;\n      if (self.nativescrollingarea) return true; // this isn't my business\n      var ret = execScrollWheel(e, false, chk);\n      if (ret) self.checkarea = 0;\n      return ret;\n    };\n\n    this.onmousewheelhr = function(e) {\n      if (self.wheelprevented) return;\n      if (self.railslocked || !self.railh.scrollable) return true;\n      if (self.rail.drag) return self.cancelEvent(e);\n\n      var nw = +(new Date());\n      var chk = false;\n      if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {\n        self.nativescrollingarea = self.isScrollable(e);\n        chk = true;\n      }\n      self.checkarea = nw;\n      if (self.nativescrollingarea) return true; // this isn't my business\n      if (self.railslocked) return self.cancelEvent(e);\n\n      return execScrollWheel(e, true, chk);\n    };\n\n    this.stop = function() {\n      self.cancelScroll();\n      if (self.scrollmon) self.scrollmon.stop();\n      self.cursorfreezed = false;\n      self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\n      self.noticeCursor();\n      return self;\n    };\n\n    this.getTransitionSpeed = function(dif) {\n      var sp = Math.round(self.opt.scrollspeed * 10);\n      var ex = Math.min(sp, Math.round((dif / 20) * self.opt.scrollspeed));\n      return (ex > 20) ? ex : 0;\n    };\n\n    if (!self.opt.smoothscroll) {\n      this.doScrollLeft = function(x, spd) { //direct\n        var y = self.getScrollTop();\n        self.doScrollPos(x, y, spd);\n      };\n      this.doScrollTop = function(y, spd) { //direct\n        var x = self.getScrollLeft();\n        self.doScrollPos(x, y, spd);\n      };\n      this.doScrollPos = function(x, y, spd) { //direct\n        var nx = (x > self.page.maxw) ? self.page.maxw : x;\n        if (nx < 0) nx = 0;\n        var ny = (y > self.page.maxh) ? self.page.maxh : y;\n        if (ny < 0) ny = 0;\n        self.synched('scroll', function() {\n          self.setScrollTop(ny);\n          self.setScrollLeft(nx);\n        });\n      };\n      this.cancelScroll = function() {}; // direct\n    } else if (self.ishwscroll && cap.hastransition && self.opt.usetransition && !!self.opt.smoothscroll) {\n      this.prepareTransition = function(dif, istime) {\n        var ex = (istime) ? ((dif > 20) ? dif : 0) : self.getTransitionSpeed(dif);\n        var trans = (ex) ? cap.prefixstyle + 'transform ' + ex + 'ms ease-out' : '';\n        if (!self.lasttransitionstyle || self.lasttransitionstyle != trans) {\n          self.lasttransitionstyle = trans;\n          self.doc.css(cap.transitionstyle, trans);\n        }\n        return ex;\n      };\n\n      this.doScrollLeft = function(x, spd) { //trans\n        var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollTop = function(y, spd) { //trans\n        var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollPos = function(x, y, spd) { //trans\n\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n\n        if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) self.cancelScroll(); //inverted movement detection      \n\n        if (self.opt.bouncescroll == false) {\n          if (y < 0) y = 0;\n          else if (y > self.page.maxh) y = self.page.maxh;\n          if (x < 0) x = 0;\n          else if (x > self.page.maxw) x = self.page.maxw;\n        }\n\n        if (self.scrollrunning && x == self.newscrollx && y == self.newscrolly) return false;\n\n        self.newscrolly = y;\n        self.newscrollx = x;\n\n        self.newscrollspeed = spd || false;\n\n        if (self.timer) return false;\n\n        self.timer = setTimeout(function() {\n\n          var top = self.getScrollTop();\n          var lft = self.getScrollLeft();\n\n          var dst = {};\n          dst.x = x - lft;\n          dst.y = y - top;\n          dst.px = lft;\n          dst.py = top;\n\n          var dd = Math.round(Math.sqrt(Math.pow(dst.x, 2) + Math.pow(dst.y, 2)));\n          var ms = (self.newscrollspeed && self.newscrollspeed > 1) ? self.newscrollspeed : self.getTransitionSpeed(dd);\n          if (self.newscrollspeed && self.newscrollspeed <= 1) ms *= self.newscrollspeed;\n\n          self.prepareTransition(ms, true);\n\n          if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n\n          if (ms > 0) {\n\n            if (!self.scrollrunning && self.onscrollstart) {\n              var info = {\n                \"type\": \"scrollstart\",\n                \"current\": {\n                  \"x\": lft,\n                  \"y\": top\n                },\n                \"request\": {\n                  \"x\": x,\n                  \"y\": y\n                },\n                \"end\": {\n                  \"x\": self.newscrollx,\n                  \"y\": self.newscrolly\n                },\n                \"speed\": ms\n              };\n              self.onscrollstart.call(self, info);\n            }\n\n            if (cap.transitionend) {\n              if (!self.scrollendtrapped) {\n                self.scrollendtrapped = true;\n                self.bind(self.doc, cap.transitionend, self.onScrollTransitionEnd, false); //I have got to do something usefull!!\n              }\n            } else {\n              if (self.scrollendtrapped) clearTimeout(self.scrollendtrapped);\n              self.scrollendtrapped = setTimeout(self.onScrollTransitionEnd, ms); // simulate transitionend event\n            }\n\n            var py = top;\n            var px = lft;\n            self.timerscroll = {\n              bz: new BezierClass(py, self.newscrolly, ms, 0, 0, 0.58, 1),\n              bh: new BezierClass(px, self.newscrollx, ms, 0, 0, 0.58, 1)\n            };\n            if (!self.cursorfreezed) self.timerscroll.tm = setInterval(function() {\n              self.showCursor(self.getScrollTop(), self.getScrollLeft())\n            }, 60);\n\n          }\n\n          self.synched(\"doScroll-set\", function() {\n            self.timer = 0;\n            if (self.scrollendtrapped) self.scrollrunning = true;\n            self.setScrollTop(self.newscrolly);\n            self.setScrollLeft(self.newscrollx);\n            if (!self.scrollendtrapped) self.onScrollTransitionEnd();\n          });\n\n\n        }, 50);\n\n      };\n\n      this.cancelScroll = function() {\n        if (!self.scrollendtrapped) return true;\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        self.scrollrunning = false;\n        if (!cap.transitionend) clearTimeout(cap.transitionend);\n        self.scrollendtrapped = false;\n        self._unbind(self.doc[0], cap.transitionend, self.onScrollTransitionEnd);\n        self.prepareTransition(0);\n        self.setScrollTop(py); // fire event onscroll\n        if (self.railh) self.setScrollLeft(px);\n        if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n        self.timerscroll = false;\n\n        self.cursorfreezed = false;\n\n        self.showCursor(py, px);\n        return self;\n      };\n      this.onScrollTransitionEnd = function() {\n        if (self.scrollendtrapped) self._unbind(self.doc[0], cap.transitionend, self.onScrollTransitionEnd);\n        self.scrollendtrapped = false;\n        self.prepareTransition(0);\n        if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n        self.timerscroll = false;\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        self.setScrollTop(py); // fire event onscroll        \n        if (self.railh) self.setScrollLeft(px); // fire event onscroll left\n\n        self.noticeCursor(false, py, px);\n\n        self.cursorfreezed = false;\n\n        if (py < 0) py = 0\n        else if (py > self.page.maxh) py = self.page.maxh;\n        if (px < 0) px = 0\n        else if (px > self.page.maxw) px = self.page.maxw;\n        if ((py != self.newscrolly) || (px != self.newscrollx)) return self.doScrollPos(px, py, self.opt.snapbackspeed);\n\n        if (self.onscrollend && self.scrollrunning) {\n          self.triggerScrollEnd();\n        }\n        self.scrollrunning = false;\n\n      };\n\n    } else {\n\n      this.doScrollLeft = function(x, spd) { //no-trans\n        var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollTop = function(y, spd) { //no-trans\n        var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollPos = function(x, y, spd) { //no-trans\n        var y = ((typeof y == \"undefined\") || (y === false)) ? self.getScrollTop(true) : y;\n\n        if ((self.timer) && (self.newscrolly == y) && (self.newscrollx == x)) return true;\n\n        if (self.timer) clearAnimationFrame(self.timer);\n        self.timer = 0;\n\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n\n        if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) self.cancelScroll(); //inverted movement detection\n\n        self.newscrolly = y;\n        self.newscrollx = x;\n\n        if (!self.bouncescroll || !self.rail.visibility) {\n          if (self.newscrolly < 0) {\n            self.newscrolly = 0;\n          } else if (self.newscrolly > self.page.maxh) {\n            self.newscrolly = self.page.maxh;\n          }\n        }\n        if (!self.bouncescroll || !self.railh.visibility) {\n          if (self.newscrollx < 0) {\n            self.newscrollx = 0;\n          } else if (self.newscrollx > self.page.maxw) {\n            self.newscrollx = self.page.maxw;\n          }\n        }\n\n        self.dst = {};\n        self.dst.x = x - px;\n        self.dst.y = y - py;\n        self.dst.px = px;\n        self.dst.py = py;\n\n        var dst = Math.round(Math.sqrt(Math.pow(self.dst.x, 2) + Math.pow(self.dst.y, 2)));\n\n        self.dst.ax = self.dst.x / dst;\n        self.dst.ay = self.dst.y / dst;\n\n        var pa = 0;\n        var pe = dst;\n\n        if (self.dst.x == 0) {\n          pa = py;\n          pe = y;\n          self.dst.ay = 1;\n          self.dst.py = 0;\n        } else if (self.dst.y == 0) {\n          pa = px;\n          pe = x;\n          self.dst.ax = 1;\n          self.dst.px = 0;\n        }\n\n        var ms = self.getTransitionSpeed(dst);\n        if (spd && spd <= 1) ms *= spd;\n        if (ms > 0) {\n          self.bzscroll = (self.bzscroll) ? self.bzscroll.update(pe, ms) : new BezierClass(pa, pe, ms, 0, 1, 0, 1);\n        } else {\n          self.bzscroll = false;\n        }\n\n        if (self.timer) return;\n\n        if ((py == self.page.maxh && y >= self.page.maxh) || (px == self.page.maxw && x >= self.page.maxw)) self.checkContentSize();\n\n        var sync = 1;\n\n        function scrolling() {\n          if (self.cancelAnimationFrame) return true;\n\n          self.scrollrunning = true;\n\n          sync = 1 - sync;\n          if (sync) return (self.timer = setAnimationFrame(scrolling) || 1);\n\n          var done = 0;\n          var sx, sy;\n\n          var sc = sy = self.getScrollTop();\n          if (self.dst.ay) {\n            sc = (self.bzscroll) ? self.dst.py + (self.bzscroll.getNow() * self.dst.ay) : self.newscrolly;\n            var dr = sc - sy;\n            if ((dr < 0 && sc < self.newscrolly) || (dr > 0 && sc > self.newscrolly)) sc = self.newscrolly;\n            self.setScrollTop(sc);\n            if (sc == self.newscrolly) done = 1;\n          } else {\n            done = 1;\n          }\n\n          var scx = sx = self.getScrollLeft();\n          if (self.dst.ax) {\n            scx = (self.bzscroll) ? self.dst.px + (self.bzscroll.getNow() * self.dst.ax) : self.newscrollx;\n            var dr = scx - sx;\n            if ((dr < 0 && scx < self.newscrollx) || (dr > 0 && scx > self.newscrollx)) scx = self.newscrollx;\n            self.setScrollLeft(scx);\n            if (scx == self.newscrollx) done += 1;\n          } else {\n            done += 1;\n          }\n\n          if (done == 2) {\n            self.timer = 0;\n            self.cursorfreezed = false;\n            self.bzscroll = false;\n            self.scrollrunning = false;\n            if (sc < 0) sc = 0;\n            else if (sc > self.page.maxh) sc = self.page.maxh;\n            if (scx < 0) scx = 0;\n            else if (scx > self.page.maxw) scx = self.page.maxw;\n            if ((scx != self.newscrollx) || (sc != self.newscrolly)) self.doScrollPos(scx, sc);\n            else {\n              if (self.onscrollend) {\n                self.triggerScrollEnd();\n              }\n            }\n          } else {\n            self.timer = setAnimationFrame(scrolling) || 1;\n          }\n        };\n        self.cancelAnimationFrame = false;\n        self.timer = 1;\n\n        if (self.onscrollstart && !self.scrollrunning) {\n          var info = {\n            \"type\": \"scrollstart\",\n            \"current\": {\n              \"x\": px,\n              \"y\": py\n            },\n            \"request\": {\n              \"x\": x,\n              \"y\": y\n            },\n            \"end\": {\n              \"x\": self.newscrollx,\n              \"y\": self.newscrolly\n            },\n            \"speed\": ms\n          };\n          self.onscrollstart.call(self, info);\n        }\n\n        scrolling();\n\n        if ((py == self.page.maxh && y >= py) || (px == self.page.maxw && x >= px)) self.checkContentSize();\n\n        self.noticeCursor();\n      };\n\n      this.cancelScroll = function() {\n        if (self.timer) clearAnimationFrame(self.timer);\n        self.timer = 0;\n        self.bzscroll = false;\n        self.scrollrunning = false;\n        return self;\n      };\n\n    }\n\n    this.doScrollBy = function(stp, relative) {\n      var ny = 0;\n      if (relative) {\n        ny = Math.floor((self.scroll.y - stp) * self.scrollratio.y)\n      } else {\n        var sy = (self.timer) ? self.newscrolly : self.getScrollTop(true);\n        ny = sy - stp;\n      }\n      if (self.bouncescroll) {\n        var haf = Math.round(self.view.h / 2);\n        if (ny < -haf) ny = -haf\n        else if (ny > (self.page.maxh + haf)) ny = (self.page.maxh + haf);\n      }\n      self.cursorfreezed = false;\n\n      var py = self.getScrollTop(true);\n      if (ny < 0 && py <= 0) return self.noticeCursor();\n      else if (ny > self.page.maxh && py >= self.page.maxh) {\n        self.checkContentSize();\n        return self.noticeCursor();\n      }\n\n      self.doScrollTop(ny);\n    };\n\n    this.doScrollLeftBy = function(stp, relative) {\n      var nx = 0;\n      if (relative) {\n        nx = Math.floor((self.scroll.x - stp) * self.scrollratio.x)\n      } else {\n        var sx = (self.timer) ? self.newscrollx : self.getScrollLeft(true);\n        nx = sx - stp;\n      }\n      if (self.bouncescroll) {\n        var haf = Math.round(self.view.w / 2);\n        if (nx < -haf) nx = -haf;\n        else if (nx > (self.page.maxw + haf)) nx = (self.page.maxw + haf);\n      }\n      self.cursorfreezed = false;\n\n      var px = self.getScrollLeft(true);\n      if (nx < 0 && px <= 0) return self.noticeCursor();\n      else if (nx > self.page.maxw && px >= self.page.maxw) return self.noticeCursor();\n\n      self.doScrollLeft(nx);\n    };\n\n    this.doScrollTo = function(pos, relative) {\n      var ny = (relative) ? Math.round(pos * self.scrollratio.y) : pos;\n      if (ny < 0) ny = 0;\n      else if (ny > self.page.maxh) ny = self.page.maxh;\n      self.cursorfreezed = false;\n      self.doScrollTop(pos);\n    };\n\n    this.checkContentSize = function() {\n      var pg = self.getContentSize();\n      if ((pg.h != self.page.h) || (pg.w != self.page.w)) self.resize(false, pg);\n    };\n\n    self.onscroll = function(e) {\n      if (self.rail.drag) return;\n      if (!self.cursorfreezed) {\n        self.synched('scroll', function() {\n          self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\n          if (self.railh) self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\n          self.noticeCursor();\n        });\n      }\n    };\n    self.bind(self.docscroll, \"scroll\", self.onscroll);\n\n    this.doZoomIn = function(e) {\n      if (self.zoomactive) return;\n      self.zoomactive = true;\n\n      self.zoomrestore = {\n        style: {}\n      };\n      var lst = ['position', 'top', 'left', 'zIndex', 'backgroundColor', 'marginTop', 'marginBottom', 'marginLeft', 'marginRight'];\n      var win = self.win[0].style;\n      for (var a in lst) {\n        var pp = lst[a];\n        self.zoomrestore.style[pp] = (typeof win[pp] != \"undefined\") ? win[pp] : '';\n      }\n\n      self.zoomrestore.style.width = self.win.css('width');\n      self.zoomrestore.style.height = self.win.css('height');\n\n      self.zoomrestore.padding = {\n        w: self.win.outerWidth() - self.win.width(),\n        h: self.win.outerHeight() - self.win.height()\n      };\n\n      if (cap.isios4) {\n        self.zoomrestore.scrollTop = $(window).scrollTop();\n        $(window).scrollTop(0);\n      }\n\n      self.win.css({\n        \"position\": (cap.isios4) ? \"absolute\" : \"fixed\",\n        \"top\": 0,\n        \"left\": 0,\n        \"z-index\": globalmaxzindex + 100,\n        \"margin\": \"0px\"\n      });\n      var bkg = self.win.css(\"backgroundColor\");\n      if (bkg == \"\" || /transparent|rgba\\(0, 0, 0, 0\\)|rgba\\(0,0,0,0\\)/.test(bkg)) self.win.css(\"backgroundColor\", \"#fff\");\n      self.rail.css({\n        \"z-index\": globalmaxzindex + 101\n      });\n      self.zoom.css({\n        \"z-index\": globalmaxzindex + 102\n      });\n      self.zoom.css('backgroundPosition', '0px -18px');\n      self.resizeZoom();\n\n      if (self.onzoomin) self.onzoomin.call(self);\n\n      return self.cancelEvent(e);\n    };\n\n    this.doZoomOut = function(e) {\n      if (!self.zoomactive) return;\n      self.zoomactive = false;\n\n      self.win.css(\"margin\", \"\");\n      self.win.css(self.zoomrestore.style);\n\n      if (cap.isios4) {\n        $(window).scrollTop(self.zoomrestore.scrollTop);\n      }\n\n      self.rail.css({\n        \"z-index\": self.zindex\n      });\n      self.zoom.css({\n        \"z-index\": self.zindex\n      });\n      self.zoomrestore = false;\n      self.zoom.css('backgroundPosition', '0px 0px');\n      self.onResize();\n\n      if (self.onzoomout) self.onzoomout.call(self);\n\n      return self.cancelEvent(e);\n    };\n\n    this.doZoom = function(e) {\n      return (self.zoomactive) ? self.doZoomOut(e) : self.doZoomIn(e);\n    };\n\n    this.resizeZoom = function() {\n      if (!self.zoomactive) return;\n\n      var py = self.getScrollTop(); //preserve scrolling position\n      self.win.css({\n        width: $(window).width() - self.zoomrestore.padding.w + \"px\",\n        height: $(window).height() - self.zoomrestore.padding.h + \"px\"\n      });\n      self.onResize();\n\n      self.setScrollTop(Math.min(self.page.maxh, py));\n    };\n\n    this.init();\n\n    $.nicescroll.push(this);\n\n  };\n\n  // Inspired by the work of Kin Blas\n  // http://webpro.host.adobe.com/people/jblas/momentum/includes/jquery.momentum.0.7.js  \n\n\n  var ScrollMomentumClass2D = function(nc) {\n    var self = this;\n    this.nc = nc;\n\n    this.lastx = 0;\n    this.lasty = 0;\n    this.speedx = 0;\n    this.speedy = 0;\n    this.lasttime = 0;\n    this.steptime = 0;\n    this.snapx = false;\n    this.snapy = false;\n    this.demulx = 0;\n    this.demuly = 0;\n\n    this.lastscrollx = -1;\n    this.lastscrolly = -1;\n\n    this.chkx = 0;\n    this.chky = 0;\n\n    this.timer = 0;\n\n    this.time = function() {\n      return +new Date(); //beautifull hack\n    };\n\n    this.reset = function(px, py) {\n      self.stop();\n      var now = self.time();\n      self.steptime = 0;\n      self.lasttime = now;\n      self.speedx = 0;\n      self.speedy = 0;\n      self.lastx = px;\n      self.lasty = py;\n      self.lastscrollx = -1;\n      self.lastscrolly = -1;\n    };\n\n    this.update = function(px, py) {\n      var now = self.time();\n      self.steptime = now - self.lasttime;\n      self.lasttime = now;\n      var dy = py - self.lasty;\n      var dx = px - self.lastx;\n      var sy = self.nc.getScrollTop();\n      var sx = self.nc.getScrollLeft();\n      var newy = sy + dy;\n      var newx = sx + dx;\n      self.snapx = (newx < 0) || (newx > self.nc.page.maxw);\n      self.snapy = (newy < 0) || (newy > self.nc.page.maxh);\n      self.speedx = dx;\n      self.speedy = dy;\n      self.lastx = px;\n      self.lasty = py;\n    };\n\n    this.stop = function() {\n      self.nc.unsynched(\"domomentum2d\");\n      if (self.timer) clearTimeout(self.timer);\n      self.timer = 0;\n      self.lastscrollx = -1;\n      self.lastscrolly = -1;\n    };\n\n    this.doSnapy = function(nx, ny) {\n      var snap = false;\n\n      if (ny < 0) {\n        ny = 0;\n        snap = true;\n      } else if (ny > self.nc.page.maxh) {\n        ny = self.nc.page.maxh;\n        snap = true;\n      }\n\n      if (nx < 0) {\n        nx = 0;\n        snap = true;\n      } else if (nx > self.nc.page.maxw) {\n        nx = self.nc.page.maxw;\n        snap = true;\n      }\n\n      (snap) ? self.nc.doScrollPos(nx, ny, self.nc.opt.snapbackspeed): self.nc.triggerScrollEnd();\n    };\n\n    this.doMomentum = function(gp) {\n      var t = self.time();\n      var l = (gp) ? t + gp : self.lasttime;\n\n      var sl = self.nc.getScrollLeft();\n      var st = self.nc.getScrollTop();\n\n      var pageh = self.nc.page.maxh;\n      var pagew = self.nc.page.maxw;\n\n      self.speedx = (pagew > 0) ? Math.min(60, self.speedx) : 0;\n      self.speedy = (pageh > 0) ? Math.min(60, self.speedy) : 0;\n\n      var chk = l && (t - l) <= 60;\n\n      if ((st < 0) || (st > pageh) || (sl < 0) || (sl > pagew)) chk = false;\n\n      var sy = (self.speedy && chk) ? self.speedy : false;\n      var sx = (self.speedx && chk) ? self.speedx : false;\n\n      if (sy || sx) {\n        var tm = Math.max(16, self.steptime); //timeout granularity\n\n        if (tm > 50) { // do smooth\n          var xm = tm / 50;\n          self.speedx *= xm;\n          self.speedy *= xm;\n          tm = 50;\n        }\n\n        self.demulxy = 0;\n\n        self.lastscrollx = self.nc.getScrollLeft();\n        self.chkx = self.lastscrollx;\n        self.lastscrolly = self.nc.getScrollTop();\n        self.chky = self.lastscrolly;\n\n        var nx = self.lastscrollx;\n        var ny = self.lastscrolly;\n\n        var onscroll = function() {\n          var df = ((self.time() - t) > 600) ? 0.04 : 0.02;\n\n          if (self.speedx) {\n            nx = Math.floor(self.lastscrollx - (self.speedx * (1 - self.demulxy)));\n            self.lastscrollx = nx;\n            if ((nx < 0) || (nx > pagew)) df = 0.10;\n          }\n\n          if (self.speedy) {\n            ny = Math.floor(self.lastscrolly - (self.speedy * (1 - self.demulxy)));\n            self.lastscrolly = ny;\n            if ((ny < 0) || (ny > pageh)) df = 0.10;\n          }\n\n          self.demulxy = Math.min(1, self.demulxy + df);\n\n          self.nc.synched(\"domomentum2d\", function() {\n\n            if (self.speedx) {\n              var scx = self.nc.getScrollLeft();\n              if (scx != self.chkx) self.stop();\n              self.chkx = nx;\n              self.nc.setScrollLeft(nx);\n            }\n\n            if (self.speedy) {\n              var scy = self.nc.getScrollTop();\n              if (scy != self.chky) self.stop();\n              self.chky = ny;\n              self.nc.setScrollTop(ny);\n            }\n\n            if (!self.timer) {\n              self.nc.hideCursor();\n              self.doSnapy(nx, ny);\n            }\n\n          });\n\n          if (self.demulxy < 1) {\n            self.timer = setTimeout(onscroll, tm);\n          } else {\n            self.stop();\n            self.nc.hideCursor();\n            self.doSnapy(nx, ny);\n          }\n        };\n\n        onscroll();\n\n      } else {\n        self.doSnapy(self.nc.getScrollLeft(), self.nc.getScrollTop());\n      }\n\n    }\n\n  };\n\n\n  // override jQuery scrollTop\n\n  var _scrollTop = jQuery.fn.scrollTop; // preserve original function\n\n  jQuery.cssHooks[\"pageYOffset\"] = {\n    get: function(elem, computed, extra) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(elem);\n    },\n    set: function(elem, value) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)): _scrollTop.call(elem, value);\n      return this;\n    }\n  };\n\n  /*  \n  $.fx.step[\"scrollTop\"] = function(fx){    \n    $.cssHooks[\"scrollTop\"].set( fx.elem, fx.now + fx.unit );\n  };\n*/\n\n  jQuery.fn.scrollTop = function(value) {\n    if (typeof value == \"undefined\") {\n      var nice = (this[0]) ? $.data(this[0], '__nicescroll') || false : false;\n      return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(this);\n    } else {\n      return this.each(function() {\n        var nice = $.data(this, '__nicescroll') || false;\n        (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)): _scrollTop.call($(this), value);\n      });\n    }\n  };\n\n  // override jQuery scrollLeft\n\n  var _scrollLeft = jQuery.fn.scrollLeft; // preserve original function\n\n  $.cssHooks.pageXOffset = {\n    get: function(elem, computed, extra) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(elem);\n    },\n    set: function(elem, value) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)): _scrollLeft.call(elem, value);\n      return this;\n    }\n  };\n\n  /*  \n  $.fx.step[\"scrollLeft\"] = function(fx){\n    $.cssHooks[\"scrollLeft\"].set( fx.elem, fx.now + fx.unit );\n  };  \n*/\n\n  jQuery.fn.scrollLeft = function(value) {\n    if (typeof value == \"undefined\") {\n      var nice = (this[0]) ? $.data(this[0], '__nicescroll') || false : false;\n      return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(this);\n    } else {\n      return this.each(function() {\n        var nice = $.data(this, '__nicescroll') || false;\n        (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)): _scrollLeft.call($(this), value);\n      });\n    }\n  };\n\n  var NiceScrollArray = function(doms) {\n    var self = this;\n    this.length = 0;\n    this.name = \"nicescrollarray\";\n\n    this.each = function(fn) {\n      for (var a = 0, i = 0; a < self.length; a++) fn.call(self[a], i++);\n      return self;\n    };\n\n    this.push = function(nice) {\n      self[self.length] = nice;\n      self.length++;\n    };\n\n    this.eq = function(idx) {\n      return self[idx];\n    };\n\n    if (doms) {\n      for (var a = 0; a < doms.length; a++) {\n        var nice = $.data(doms[a], '__nicescroll') || false;\n        if (nice) {\n          this[this.length] = nice;\n          this.length++;\n        }\n      };\n    }\n\n    return this;\n  };\n\n  function mplex(el, lst, fn) {\n    for (var a = 0; a < lst.length; a++) fn(el, lst[a]);\n  };\n  mplex(\n    NiceScrollArray.prototype, ['show', 'hide', 'toggle', 'onResize', 'resize', 'remove', 'stop', 'doScrollPos'],\n    function(e, n) {\n      e[n] = function() {\n        var args = arguments;\n        return this.each(function() {\n          this[n].apply(this, args);\n        });\n      };\n    }\n  );\n\n  jQuery.fn.getNiceScroll = function(index) {\n    if (typeof index == \"undefined\") {\n      return new NiceScrollArray(this);\n    } else {\n      var nice = this[index] && $.data(this[index], '__nicescroll') || false;\n      return nice;\n    }\n  };\n\n  jQuery.extend(jQuery.expr[':'], {\n    nicescroll: function(a) {\n      return ($.data(a, '__nicescroll')) ? true : false;\n    }\n  });\n\n  $.fn.niceScroll = function(wrapper, opt) {\n    if (typeof opt == \"undefined\") {\n      if ((typeof wrapper == \"object\") && !(\"jquery\" in wrapper)) {\n        opt = wrapper;\n        wrapper = false;\n      }\n    }\n    opt = $.extend({},opt); // cloning\n    var ret = new NiceScrollArray();\n    if (typeof opt == \"undefined\") opt = {};\n\n    if (wrapper || false) {\n      opt.doc = $(wrapper);\n      opt.win = $(this);\n    }\n    var docundef = !(\"doc\" in opt);\n    if (!docundef && !(\"win\" in opt)) opt.win = $(this);\n\n    this.each(function() {\n      var nice = $(this).data('__nicescroll') || false;\n      if (!nice) {\n        opt.doc = (docundef) ? $(this) : opt.doc;\n        nice = new NiceScrollClass(opt, $(this));\n        $(this).data('__nicescroll', nice);\n      }\n      ret.push(nice);\n    });\n    return (ret.length == 1) ? ret[0] : ret;\n  };\n\n  window.NiceScroll = {\n    getjQuery: function() {\n      return jQuery\n    }\n  };\n\n  if (!$.nicescroll) {\n    $.nicescroll = new NiceScrollArray();\n    $.nicescroll.options = _globaloptions;\n  }\n\n}));"],"sourceRoot":"/source/"}